/**
 * Isometry Design Tokens (CardBoard CSS Variables)
 *
 * CSS custom properties for CardBoard D3 components.
 * Aligned with Isometry's theme system (NeXTSTEP + Modern).
 */

:root {
  /* ============================================
     Color Palette (Modern theme default)
     ============================================ */

  /* Background layers */
  --cb-bg-base: #f5f5f7;
  --cb-bg-raised: #ffffff;
  --cb-bg-overlay: #f0f0f0;
  --cb-bg-glass: rgba(255, 255, 255, 0.8);

  /* Foreground / text */
  --cb-fg-primary: rgb(55, 65, 81);
  --cb-fg-secondary: rgb(107, 114, 128);
  --cb-fg-muted: rgb(156, 163, 175);
  --cb-fg-inverse: #ffffff;

  /* Accent colors (macOS-inspired) */
  --cb-accent-blue: #0a84ff;
  --cb-accent-purple: #bf5af2;
  --cb-accent-pink: #ff375f;
  --cb-accent-orange: #ff9f0a;
  --cb-accent-yellow: #ffd60a;
  --cb-accent-green: #30d158;
  --cb-accent-teal: #64d2ff;
  --cb-accent-red: #ff453a;

  /* Current accent */
  --cb-accent: var(--cb-accent-blue);
  --cb-accent-hover: color-mix(in srgb, var(--cb-accent) 85%, white);
  --cb-accent-active: color-mix(in srgb, var(--cb-accent) 70%, black);

  /* Semantic colors */
  --cb-success: var(--cb-accent-green);
  --cb-warning: var(--cb-accent-orange);
  --cb-error: var(--cb-accent-red);
  --cb-info: var(--cb-accent-blue);

  /* Borders */
  --cb-border-subtle: rgba(0, 0, 0, 0.04);
  --cb-border-default: rgba(0, 0, 0, 0.1);
  --cb-border-strong: rgba(0, 0, 0, 0.2);
  --cb-border-accent: var(--cb-accent);

  /* Shadows */
  --cb-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.08);
  --cb-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
  --cb-shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
  --cb-shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.2);
  --cb-shadow-glow: 0 0 20px color-mix(in srgb, var(--cb-accent) 30%, transparent);

  /* ============================================
     Typography
     ============================================ */

  --cb-font-sans: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', Roboto, sans-serif;
  --cb-font-mono: 'SF Mono', 'Fira Code', 'JetBrains Mono', Consolas, monospace;

  --cb-text-xs: 0.75rem;
  --cb-text-sm: 0.875rem;
  --cb-text-base: 1rem;
  --cb-text-lg: 1.125rem;
  --cb-text-xl: 1.25rem;
  --cb-text-2xl: 1.5rem;
  --cb-text-3xl: 2rem;

  --cb-leading-tight: 1.25;
  --cb-leading-normal: 1.5;
  --cb-leading-relaxed: 1.75;

  --cb-font-weight-normal: 400;
  --cb-font-weight-medium: 500;
  --cb-font-weight-semibold: 600;
  --cb-font-weight-bold: 700;

  /* ============================================
     Spacing
     ============================================ */

  --cb-space-0: 0;
  --cb-space-1: 0.25rem;
  --cb-space-2: 0.5rem;
  --cb-space-3: 0.75rem;
  --cb-space-4: 1rem;
  --cb-space-5: 1.25rem;
  --cb-space-6: 1.5rem;
  --cb-space-8: 2rem;
  --cb-space-10: 2.5rem;
  --cb-space-12: 3rem;
  --cb-space-16: 4rem;

  /* ============================================
     Border Radius
     ============================================ */

  --cb-radius-none: 0;
  --cb-radius-sm: 4px;
  --cb-radius-md: 8px;
  --cb-radius-lg: 12px;
  --cb-radius-xl: 16px;
  --cb-radius-2xl: 24px;
  --cb-radius-full: 9999px;

  /* ============================================
     Effects
     ============================================ */

  --cb-blur-sm: blur(4px);
  --cb-blur-md: blur(12px);
  --cb-blur-lg: blur(20px);
  --cb-blur-xl: blur(40px);

  /* Glass effect shorthand */
  --cb-glass-bg: var(--cb-bg-glass);
  --cb-glass-border: var(--cb-border-default);
  --cb-glass-blur: var(--cb-blur-lg);

  /* ============================================
     Transitions
     ============================================ */

  --cb-ease-default: cubic-bezier(0.4, 0, 0.2, 1);
  --cb-ease-in: cubic-bezier(0.4, 0, 1, 1);
  --cb-ease-out: cubic-bezier(0, 0, 0.2, 1);
  --cb-ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --cb-ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);

  --cb-duration-fast: 150ms;
  --cb-duration-normal: 300ms;
  --cb-duration-slow: 500ms;

  --cb-transition-fast: var(--cb-duration-fast) var(--cb-ease-default);
  --cb-transition-normal: var(--cb-duration-normal) var(--cb-ease-default);
  --cb-transition-slow: var(--cb-duration-slow) var(--cb-ease-default);

  /* ============================================
     Z-Index Scale
     ============================================ */

  --cb-z-base: 0;
  --cb-z-raised: 10;
  --cb-z-dropdown: 100;
  --cb-z-sticky: 200;
  --cb-z-overlay: 300;
  --cb-z-modal: 400;
  --cb-z-popover: 500;
  --cb-z-tooltip: 600;
  --cb-z-toast: 700;

  /* ============================================
     Component-Specific Tokens
     ============================================ */

  /* Card */
  --cb-card-padding: var(--cb-space-4);
  --cb-card-padding-sm: var(--cb-space-2) var(--cb-space-3);
  --cb-card-padding-lg: var(--cb-space-5) var(--cb-space-6);
  --cb-card-radius: var(--cb-radius-lg);
  --cb-card-gap: var(--cb-space-3);

  /* Button */
  --cb-button-height-sm: 28px;
  --cb-button-height-md: 36px;
  --cb-button-height-lg: 44px;
  --cb-button-padding-x: var(--cb-space-4);
  --cb-button-padding-x-sm: var(--cb-space-3);
  --cb-button-padding-x-lg: var(--cb-space-6);
  --cb-button-radius: var(--cb-radius-md);

  /* Input */
  --cb-input-height: 36px;
  --cb-input-height-sm: 28px;
  --cb-input-height-lg: 44px;
  --cb-input-padding-x: var(--cb-space-3);
  --cb-input-radius: var(--cb-radius-md);

  /* Canvas */
  --cb-canvas-bg: var(--cb-bg-base);
  --cb-canvas-grid-color: var(--cb-border-subtle);
  --cb-canvas-grid-size: 24px;

  /* D3 Chart colors (Tableau10) */
  --cb-chart-1: #4e79a7;
  --cb-chart-2: #f28e2c;
  --cb-chart-3: #e15759;
  --cb-chart-4: #76b7b2;
  --cb-chart-5: #59a14f;
  --cb-chart-6: #edc949;
  --cb-chart-7: #af7aa1;
  --cb-chart-8: #ff9da7;
  --cb-chart-9: #9c755f;
  --cb-chart-10: #bab0ab;
  --cb-chart-axis: #d1d5db;
  --cb-chart-axis-text: #6b7280;
  --cb-chart-grid: #e5e7eb;
}

/* ============================================
   NeXTSTEP Theme Override
   ============================================ */

[data-theme="NeXTSTEP"],
.cb-theme-nextstep {
  /* Background layers */
  --cb-bg-base: #c0c0c0;
  --cb-bg-raised: #d4d4d4;
  --cb-bg-overlay: #b0b0b0;
  --cb-bg-glass: #c0c0c0;

  /* Foreground / text */
  --cb-fg-primary: #404040;
  --cb-fg-secondary: #606060;
  --cb-fg-muted: #909090;
  --cb-fg-inverse: #ffffff;

  /* Accent (NeXTSTEP blue) */
  --cb-accent: #2850a0;
  --cb-accent-hover: #4070c0;
  --cb-accent-active: #203878;

  /* Borders (beveled effect) */
  --cb-border-subtle: #a0a0a0;
  --cb-border-default: #707070;
  --cb-border-strong: #505050;
  --cb-border-light: #ffffff;

  /* NeXTSTEP-specific borders */
  --cb-border-raised-top: #ffffff;
  --cb-border-raised-bottom: #707070;
  --cb-border-sunken-top: #707070;
  --cb-border-sunken-bottom: #ffffff;

  /* Shadows (minimal for NeXTSTEP) */
  --cb-shadow-sm: none;
  --cb-shadow-md: none;
  --cb-shadow-lg: 2px 2px 0 #505050;
  --cb-shadow-xl: 3px 3px 0 #505050;
  --cb-shadow-glow: none;

  /* No blur effects in NeXTSTEP */
  --cb-glass-bg: #c0c0c0;
  --cb-glass-border: var(--cb-border-default);
  --cb-glass-blur: none;

  /* Border radius (none in NeXTSTEP) */
  --cb-radius-none: 0;
  --cb-radius-sm: 0;
  --cb-radius-md: 0;
  --cb-radius-lg: 0;
  --cb-radius-xl: 0;
  --cb-radius-2xl: 0;
  --cb-radius-full: 0;

  /* Card */
  --cb-card-radius: 0;

  /* Button */
  --cb-button-radius: 0;

  /* Input */
  --cb-input-radius: 0;

  /* D3 Chart colors (grayscale for NeXTSTEP) */
  --cb-chart-1: #808080;
  --cb-chart-2: #606060;
  --cb-chart-3: #a0a0a0;
  --cb-chart-4: #707070;
  --cb-chart-5: #909090;
  --cb-chart-6: #b0b0b0;
  --cb-chart-7: #585858;
  --cb-chart-8: #787878;
  --cb-chart-9: #686868;
  --cb-chart-10: #989898;
  --cb-chart-axis: #808080;
  --cb-chart-axis-text: #404040;
  --cb-chart-grid: #a0a0a0;
}

/* ============================================
   Utility Classes for D3 Components
   ============================================ */

/* Base card styling */
.cb-card {
  background: var(--cb-bg-raised);
  border: 1px solid var(--cb-border-default);
  border-radius: var(--cb-card-radius);
  padding: var(--cb-card-padding);
  color: var(--cb-fg-primary);
  font-family: var(--cb-font-sans);
  transition: box-shadow var(--cb-transition-fast), transform var(--cb-transition-fast);
}

.cb-card--glass {
  background: var(--cb-glass-bg);
  backdrop-filter: var(--cb-glass-blur);
  -webkit-backdrop-filter: var(--cb-glass-blur);
  border-color: var(--cb-glass-border);
}

.cb-card--elevated {
  box-shadow: var(--cb-shadow-md);
}

.cb-card--outline {
  background: transparent;
  border: 2px solid var(--cb-border-strong);
}

.cb-card--interactive:hover {
  box-shadow: var(--cb-shadow-lg);
  transform: translateY(-2px);
}

.cb-card--selected {
  border-color: var(--cb-accent);
  box-shadow: var(--cb-shadow-glow);
}

/* NeXTSTEP-specific beveled card */
[data-theme="NeXTSTEP"] .cb-card {
  border: 2px solid;
  border-top-color: var(--cb-border-raised-top);
  border-left-color: var(--cb-border-raised-top);
  border-bottom-color: var(--cb-border-raised-bottom);
  border-right-color: var(--cb-border-raised-bottom);
  box-shadow: none;
}

[data-theme="NeXTSTEP"] .cb-card--interactive:hover {
  background: #c8c8c8;
  transform: none;
}

[data-theme="NeXTSTEP"] .cb-card--selected {
  border-color: var(--cb-accent);
  box-shadow: 2px 2px 0 var(--cb-border-strong);
}

/* Canvas background patterns */
.cb-canvas {
  background: var(--cb-canvas-bg);
}

.cb-canvas--dots {
  background-image: radial-gradient(var(--cb-canvas-grid-color) 1px, transparent 1px);
  background-size: var(--cb-canvas-grid-size) var(--cb-canvas-grid-size);
}

.cb-canvas--grid {
  background-image:
    linear-gradient(var(--cb-canvas-grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--cb-canvas-grid-color) 1px, transparent 1px);
  background-size: var(--cb-canvas-grid-size) var(--cb-canvas-grid-size);
}

/* Spinner animation */
@keyframes cb-spin {
  to {
    transform: rotate(360deg);
  }
}

.cb-spinner {
  animation: cb-spin 1s linear infinite;
}
