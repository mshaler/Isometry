---
phase: 05-xcode-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [
  native/IsometryiOS.xcodeproj/project.pbxproj,
  native/IsometryiOS/IsometryiOS/IsometryApp.swift,
  native/IsometryiOS/IsometryiOS/ContentView.swift,
  native/IsometryiOS/IsometryiOS/Info.plist,
  native/IsometryiOS/IsometryiOS/IsometryiOS.entitlements,
  native/IsometryiOS/IsometryiOS/Assets.xcassets,
  native/IsometrymacOS.xcodeproj/project.pbxproj,
  native/IsometrymacOS/IsometrymacOS/IsometryApp.swift,
  native/IsometrymacOS/IsometrymacOS/ContentView.swift,
  native/IsometrymacOS/IsometrymacOS/Info.plist,
  native/IsometrymacOS/IsometrymacOS/IsometrymacOS.entitlements,
  native/IsometrymacOS/IsometrymacOS/Assets.xcassets
]
autonomous: true

must_haves:
  truths:
    - "Separate iOS and macOS Xcode projects exist with proper structure"
    - "All Swift source code from Sources/Isometry is accessible in both projects"
    - "App entry point and entitlements are properly configured"
    - "Assets and resources are accessible in both projects"
  artifacts:
    - path: "native/IsometryiOS.xcodeproj"
      provides: "iOS Xcode project file"
      min_lines: 200
    - path: "native/IsometrymacOS.xcodeproj"
      provides: "macOS Xcode project file"
      min_lines: 200
    - path: "native/IsometryiOS/IsometryiOS/IsometryApp.swift"
      provides: "iOS app entry point"
      contains: "@main"
    - path: "native/IsometrymacOS/IsometrymacOS/IsometryApp.swift"
      provides: "macOS app entry point"
      contains: "@main"
  key_links:
    - from: "native/IsometryiOS.xcodeproj"
      to: "Sources/Isometry/**/*.swift"
      via: "file references"
      pattern: "Sources/Isometry"
    - from: "native/IsometrymacOS.xcodeproj"
      to: "Sources/Isometry/**/*.swift"
      via: "file references"
      pattern: "Sources/Isometry"
---

<objective>
Create traditional iOS and macOS Xcode projects and migrate the Swift Package Manager source code structure

Purpose: Enable code signing and capabilities configuration which are not available in Swift Package Manager projects
Output: Working iOS and macOS Xcode projects with migrated source code and resources
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/mshaler/Developer/Projects/Isometry/.planning/PROJECT.md
@/Users/mshaler/Developer/Projects/Isometry/.planning/ROADMAP.md
@/Users/mshaler/Developer/Projects/Isometry/.planning/STATE.md

# Current Swift Package Manager structure
@/Users/mshaler/Developer/Projects/Isometry/native/Package.swift
@/Users/mshaler/Developer/Projects/Isometry/native/IsometryApp/IsometryApp.swift
@/Users/mshaler/Developer/Projects/Isometry/native/IsometryApp/Info.plist
@/Users/mshaler/Developer/Projects/Isometry/native/IsometryApp/IsometryApp.entitlements
</context>

<tasks>

<task type="auto">
  <name>Create iOS Xcode project structure</name>
  <files>native/IsometryiOS.xcodeproj/project.pbxproj, native/IsometryiOS/IsometryiOS/IsometryApp.swift, native/IsometryiOS/IsometryiOS/ContentView.swift, native/IsometryiOS/IsometryiOS/Info.plist, native/IsometryiOS/IsometryiOS/IsometryiOS.entitlements</files>
  <action>
    Create iOS Xcode project using Xcode command line tools:
    1. Create new iOS App project at native/IsometryiOS/ with bundle identifier com.mshaler.isometry
    2. Set deployment target to iOS 17.0
    3. Use SwiftUI interface and Swift language
    4. Copy IsometryApp/IsometryApp.swift content to IsometryiOS/IsometryApp.swift (preserving @main structure)
    5. Create ContentView.swift that imports the main Isometry module
    6. Copy Info.plist with iOS-specific keys (remove macOS-specific entries)
    7. Copy entitlements file as IsometryiOS.entitlements
    8. Ensure project structure follows iOS app conventions

    Use `xcodebuild -project` to verify project creation works correctly.
  </action>
  <verify>`xcodebuild -project native/IsometryiOS.xcodeproj -scheme IsometryiOS -sdk iphoneos -configuration Debug clean` succeeds</verify>
  <done>iOS Xcode project exists with proper app structure, builds successfully with xcodebuild</done>
</task>

<task type="auto">
  <name>Create macOS Xcode project structure</name>
  <files>native/IsometrymacOS.xcodeproj/project.pbxproj, native/IsometrymacOS/IsometrymacOS/IsometryApp.swift, native/IsometrymacOS/IsometrymacOS/ContentView.swift, native/IsometrymacOS/IsometrymacOS/Info.plist, native/IsometrymacOS/IsometrymacOS/IsometrymacOS.entitlements</files>
  <action>
    Create macOS Xcode project using Xcode command line tools:
    1. Create new macOS App project at native/IsometrymacOS/ with bundle identifier com.mshaler.isometry
    2. Set deployment target to macOS 14.0
    3. Use SwiftUI interface and Swift language
    4. Copy IsometryApp/IsometryApp.swift content to IsometrymacOS/IsometryApp.swift (preserving @main structure)
    5. Create ContentView.swift that imports the main Isometry module
    6. Copy Info.plist with macOS-specific keys (remove iOS-specific entries)
    7. Copy entitlements file as IsometrymacOS.entitlements
    8. Ensure project structure follows macOS app conventions

    Use `xcodebuild -project` to verify project creation works correctly.
  </action>
  <verify>`xcodebuild -project native/IsometrymacOS.xcodeproj -scheme IsometrymacOS -sdk macosx -configuration Debug clean` succeeds</verify>
  <done>macOS Xcode project exists with proper app structure, builds successfully with xcodebuild</done>
</task>

<task type="auto">
  <name>Add Isometry source files to both projects</name>
  <files>native/IsometryiOS.xcodeproj/project.pbxproj, native/IsometrymacOS.xcodeproj/project.pbxproj</files>
  <action>
    Add all Swift source files from Sources/Isometry to both Xcode projects:
    1. Use `find Sources/Isometry -name "*.swift" -type f` to get all source files
    2. For iOS project: Add file references to all .swift files in Sources/Isometry directory structure
    3. For macOS project: Add file references to all .swift files in Sources/Isometry directory structure
    4. Preserve the directory structure (Database/, Views/, Models/, etc.)
    5. Add Resources/schema.sql and PrivacyInfo.xcprivacy as bundle resources
    6. Add Assets.xcassets with app icons to both projects
    7. Set up proper file groups in Xcode project navigator

    Use `xcodebuild -project -list` to verify source files are properly added to targets.
    DO NOT copy files - use file references to existing Sources/Isometry location.
  </action>
  <verify>Both project.pbxproj files contain references to all Swift source files in Sources/Isometry</verify>
  <done>All Swift source code and resources are accessible from both Xcode projects via file references</done>
</task>

</tasks>

<verification>
- iOS and macOS Xcode projects exist in native/ directory
- Both projects reference the same Sources/Isometry codebase
- App entry points are properly configured
- Resources and assets are accessible
- Projects build successfully with xcodebuild
</verification>

<success_criteria>
- `xcodebuild -project native/IsometryiOS.xcodeproj -scheme IsometryiOS -sdk iphoneos -configuration Debug clean` succeeds
- `xcodebuild -project native/IsometrymacOS.xcodeproj -scheme IsometrymacOS -sdk macosx -configuration Debug clean` succeeds
- Both projects show all Swift source files in Xcode navigator
- App icons and resources are properly bundled
</success_criteria>

<output>
After completion, create `.planning/phases/05-xcode-migration/05-01-SUMMARY.md`
</output>