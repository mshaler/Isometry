---
phase: 05-xcode-migration
plan: 04
type: execute
wave: 4
depends_on: [05-03]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Both iOS and macOS projects build successfully in Xcode"
    - "Projects run correctly in simulators with full functionality"
    - "Original Swift Package Manager project can be preserved as reference"
    - "Migration is complete and verified working"
  artifacts:
    - path: "native/IsometryiOS.xcodeproj"
      provides: "Verified working iOS Xcode project"
      min_lines: 200
    - path: "native/IsometrymacOS.xcodeproj"
      provides: "Verified working macOS Xcode project"
      min_lines: 200
  key_links:
    - from: "Xcode projects"
      to: "Sources/Isometry codebase"
      via: "file references"
      pattern: "working compilation"
    - from: "Built applications"
      to: "GRDB database"
      via: "runtime execution"
      pattern: "functional app launch"
---

<objective>
Verify builds, test migration completeness, and confirm project functionality

Purpose: Ensure the migration from Swift Package Manager to Xcode projects is complete and functional
Output: Verified working iOS and macOS applications built from traditional Xcode projects
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/mshaler/Developer/Projects/Isometry/.planning/phases/05-xcode-migration/05-03-SUMMARY.md
@/Users/mshaler/Developer/Projects/Isometry/native/Sources/Isometry/App/IsometryApp.swift
@/Users/mshaler/Developer/Projects/Isometry/native/Sources/Isometry/App/ContentView.swift
</context>

<tasks>

<task type="auto">
  <name>Build and test iOS project functionality</name>
  <files></files>
  <action>
    Verify iOS Xcode project builds and runs correctly:
    1. Clean and build iOS project: `xcodebuild -project native/IsometryiOS.xcodeproj -scheme IsometryiOS -sdk iphonesimulator clean build`
    2. Run in iOS Simulator to verify app launches successfully
    3. Test basic functionality:
       - App launches without crashes
       - Database initialization works (GRDB connection)
       - SuperGrid view renders correctly
       - CloudKit manager initializes (even without connection)
    4. Check console output for any runtime errors
    5. Verify all Swift source files are compiled correctly
    6. Test that app resources (Assets, schema.sql) are accessible

    Document any issues found and verify they are resolved.
  </action>
  <verify>iOS app builds successfully and runs in simulator without crashes</verify>
  <done>iOS project produces working application with full functionality</done>
</task>

<task type="auto">
  <name>Build and test macOS project functionality</name>
  <files></files>
  <action>
    Verify macOS Xcode project builds and runs correctly:
    1. Clean and build macOS project: `xcodebuild -project native/IsometrymacOS.xcodeproj -scheme IsometrymacOS clean build`
    2. Run macOS application to verify app launches successfully
    3. Test basic functionality:
       - App launches without crashes
       - Database initialization works (GRDB connection)
       - SuperGrid view renders correctly in macOS window
       - CloudKit manager initializes (even without connection)
       - macOS-specific features work (window management, menus)
    4. Check console output for any runtime errors
    5. Verify all Swift source files are compiled correctly
    6. Test that app resources (Assets, schema.sql) are accessible

    Document any issues found and verify they are resolved.
  </action>
  <verify>macOS app builds successfully and runs without crashes</verify>
  <done>macOS project produces working application with full functionality</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Xcode project migration with verified iOS and macOS applications</what-built>
  <how-to-verify>
    1. **iOS Testing:**
       - Open native/IsometryiOS.xcodeproj in Xcode
       - Build and run on iOS Simulator (iPhone or iPad)
       - Verify the app launches and displays the SuperGrid interface
       - Confirm no console errors related to missing resources or database issues
       - Test basic navigation and interface responsiveness

    2. **macOS Testing:**
       - Open native/IsometrymacOS.xcodeproj in Xcode
       - Build and run macOS application
       - Verify the app launches in a native macOS window
       - Confirm SuperGrid renders correctly with macOS-specific UI
       - Test window resizing and macOS-specific interactions

    3. **Migration Verification:**
       - Confirm both projects have access to all original Swift source code
       - Verify GRDB database functionality works in both apps
       - Check that app icons and assets display correctly
       - Ensure entitlements and capabilities are preserved

    4. **Code Signing Verification:**
       - Both projects show "Signing & Capabilities" tabs in Xcode
       - CloudKit entitlements are properly configured
       - Projects are ready for device deployment (when developer account is connected)
  </how-to-verify>
  <resume-signal>Type "migration-complete" if both apps work correctly, or describe any functional issues</resume-signal>
</task>

<task type="auto">
  <name>Document migration completion and cleanup</name>
  <files>native/MIGRATION-COMPLETE.md</files>
  <action>
    Create documentation of successful migration:
    1. Create MIGRATION-COMPLETE.md documenting:
       - Original Swift Package Manager structure preserved
       - New Xcode projects created: IsometryiOS.xcodeproj, IsometrymacOS.xcodeproj
       - Dependencies successfully migrated (GRDB.swift via SPM)
       - Code signing and capabilities now available
       - Both platforms verified working
    2. List next steps:
       - Connect Apple Developer account for device testing
       - Configure CloudKit production container
       - Prepare for App Store submission
    3. Note that original Package.swift can be kept for reference
    4. Document any differences in build process (Xcode vs SPM)

    Provide clear instructions for future development workflow.
  </action>
  <verify>MIGRATION-COMPLETE.md exists with comprehensive migration summary</verify>
  <done>Migration process documented, next steps clearly outlined</done>
</task>

</tasks>

<verification>
- Both iOS and macOS projects build and run successfully
- Applications launch without crashes and display proper interface
- Database and CloudKit integration works correctly
- Code signing and capabilities are properly configured
- Migration process is documented
</verification>

<success_criteria>
- iOS app builds and runs successfully in Simulator
- macOS app builds and runs successfully on macOS
- Both applications display SuperGrid interface correctly
- No runtime crashes or critical errors
- Signing & Capabilities tabs accessible for both projects
- Documentation completed for migration process
</success_criteria>

<output>
After completion, create `.planning/phases/05-xcode-migration/05-04-SUMMARY.md`
</output>