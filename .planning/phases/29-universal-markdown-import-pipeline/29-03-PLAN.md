# Phase 29 Plan 03: React Import Wizard with Field Mapping and Preview

## Frontmatter
- **Phase:** 29
- **Plan:** 03
- **Type:** checkpoint
- **Wave:** 2
- **Depends on:** 29-01, 29-02 completion

## Objective

Create a React-based import wizard interface with live markdown preview, field mapping configuration, and seamless integration with the Universal Markdown Import system.

## Context

With the universal markdown parsing infrastructure complete, we need a user-friendly interface for importing markdown files. The wizard should provide:
- File selection and drag-drop support
- Live markdown preview with dialect detection
- Interactive field mapping for frontmatter properties
- Progress tracking for batch imports
- Integration with existing React components and contexts

## Tasks

### Task 1: Import Wizard Component Structure
**Type:** auto

Create the React component architecture for the markdown import wizard.

**Implementation:**
- Multi-step wizard component using existing Isometry design patterns
- File selection with drag-drop support
- Progress tracking and error display
- Integration with existing theme system

**Files to create:**
- `src/components/import/ImportWizard.tsx`
- `src/components/import/FileSelector.tsx`
- `src/components/import/ImportProgress.tsx`

**Done when:**
- [ ] Wizard component renders correctly with step navigation
- [ ] File selection supports both click and drag-drop
- [ ] Progress tracking displays import status
- [ ] Error handling shows actionable messages

### Task 2: Live Markdown Preview
**Type:** auto

Implement live markdown preview with dialect detection and field extraction display.

**Implementation:**
- Real-time markdown rendering using existing markdown library
- Dialect detection display (CommonMark, GitHub, Obsidian)
- Frontmatter field preview with syntax highlighting
- Wiki-link and relationship visualization

**Files to create:**
- `src/components/import/MarkdownPreview.tsx`
- `src/components/import/DialectDetector.tsx`
- `src/components/import/FrontmatterPreview.tsx`

**Done when:**
- [ ] Live preview updates as files are selected
- [ ] Dialect detection shows correct format identification
- [ ] Frontmatter fields displayed with proper formatting
- [ ] Wiki-links and relationships highlighted

### Task 3: Interactive Field Mapping
**Type:** auto

Create interactive interface for mapping frontmatter fields to Node properties.

**Implementation:**
- Dynamic field mapping interface
- LATCH property suggestions for common field names
- Custom property creation for unmapped fields
- Mapping preview with before/after display

**Files to create:**
- `src/components/import/FieldMapper.tsx`
- `src/components/import/PropertySuggestions.tsx`
- `src/components/import/MappingPreview.tsx`

**Done when:**
- [ ] Field mapping interface allows property assignment
- [ ] LATCH suggestions work for common field names
- [ ] Custom properties can be created for unknown fields
- [ ] Mapping preview shows transformation results

### Task 4: Bridge Integration and Import Execution
**Type:** auto

Integrate the React wizard with the native Swift import system via the WebView bridge.

**Implementation:**
- Bridge methods for import execution
- Progress reporting from native to React
- Error handling across the bridge boundary
- Result display and import summary

**Files to modify:**
- `src/bridge/BridgeContext.tsx`
- `src/hooks/useImport.tsx`

**Files to create:**
- `src/hooks/useMarkdownImport.tsx`

**Done when:**
- [ ] Bridge methods expose import functionality
- [ ] Progress reports from native import to React UI
- [ ] Errors propagate correctly across bridge
- [ ] Import results display properly in wizard

### Task 5: Integration with Existing Components
**Type:** checkpoint

Integrate the import wizard with existing Isometry components and verify the complete workflow.

**Implementation:**
- Add import wizard to main navigation
- Connect with existing data contexts
- Test complete import workflow
- Verify integration with graph visualization

**Files to modify:**
- `src/components/navigation/MainNavigation.tsx`
- `src/App.tsx`

**Done when:**
- [ ] Import wizard accessible from main navigation
- [ ] Complete workflow tested: select → preview → map → import
- [ ] Imported nodes appear in existing visualizations
- [ ] All integration points work smoothly

**CHECKPOINT:** User verification of import wizard interface and workflow

## Verification

### Component Integration Check
Test wizard component rendering:

```bash
npm run dev
```

Navigate to import wizard and verify:
- [ ] Wizard renders without errors: ✓
- [ ] File selection works (click and drag-drop): ✓
- [ ] Step navigation functions correctly: ✓
- [ ] Theme integration matches existing UI: ✓

### Preview Functionality Check
Test markdown preview with various formats:

1. Select CommonMark file
2. Select GitHub Flavored Markdown file
3. Select Obsidian-style file with wiki-links

Expected results:
- [ ] Live preview updates correctly: ✓
- [ ] Dialect detection shows correct format: ✓
- [ ] Frontmatter fields displayed properly: ✓
- [ ] Wiki-links highlighted in preview: ✓

### Field Mapping Verification
Test field mapping interface:

1. Load file with frontmatter fields
2. Test LATCH property suggestions
3. Create custom property mapping
4. Preview mapping results

Expected results:
- [ ] Field mapping interface responds correctly: ✓
- [ ] LATCH suggestions work for common fields: ✓
- [ ] Custom properties can be created: ✓
- [ ] Mapping preview shows accurate transformation: ✓

## Success Criteria

- [ ] Import wizard provides intuitive file selection and preview
- [ ] Live markdown preview works with all supported dialects
- [ ] Field mapping interface allows flexible property assignment
- [ ] Bridge integration enables seamless import execution
- [ ] Complete workflow from file selection to imported nodes works
- [ ] Integration with existing Isometry components is seamless

## Checkpoint Details

**What was built:**
Complete React import wizard with live preview, field mapping, and native bridge integration

**How to verify:**

1. Launch application: `npm run dev`
2. Navigate to import wizard via main navigation
3. Select sample markdown files with various formats
4. Verify live preview shows content and dialect detection
5. Test field mapping with different frontmatter fields
6. Execute import and verify nodes appear in main application

**Expected behavior:**
- Wizard should handle all common markdown formats
- Field mapping should provide intelligent suggestions
- Import should execute without errors
- Imported nodes should integrate with existing graph system

## Output

**Primary deliverables:**
- Complete React import wizard component suite
- Live markdown preview with dialect detection
- Interactive field mapping interface
- Bridge integration for import execution

**User experience features:**
- Drag-drop file selection
- Real-time preview and validation
- Intelligent field mapping suggestions
- Progress tracking and error handling

**Integration points:**
- Main navigation integration
- Bridge method extensions
- Context provider compatibility
- Graph system integration