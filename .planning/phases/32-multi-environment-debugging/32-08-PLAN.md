---
phase: 32-multi-environment-debugging
plan: 08
type: execute
wave: 2
depends_on: ["32-06"]
files_modified: [
  "src/components/test/LiveQueryTest.tsx",
  "src/components/Toolbar.tsx",
  "src/components/UnifiedApp.tsx",
  "src/components/views/D3GridView.tsx",
  "src/components/views/D3ListView.tsx",
  "src/components/views/EnhancedGridView.tsx",
  "src/components/views/EnhancedListView.tsx",
  "src/components/views/EnhancedNetworkView.tsx"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All view components compile without TypeScript errors"
    - "Component prop interfaces align with actual usage"
    - "D3 view components handle data properly without type errors"
  artifacts:
    - path: "src/components/views/D3GridView.tsx"
      provides: "Type-safe D3 grid view component"
      min_lines: 200
    - path: "src/components/views/EnhancedGridView.tsx"
      provides: "Enhanced grid view with proper prop interfaces"
      min_lines: 50
  key_links:
    - from: "src/components/views/EnhancedGridView.tsx"
      to: "GridViewProps interface"
      via: "prop type compatibility"
      pattern: "data.*onNodeClick.*GridViewProps"
    - from: "src/components/views/D3GridView.tsx"
      to: "PAFVContextValue.wells"
      via: "context property access"
      pattern: "wells.*PAFVContextValue"
---

<objective>
Fix remaining TypeScript compilation errors in view components and test files: resolve prop interface mismatches, add missing properties to context interfaces, and fix type compatibility issues in D3 view components.

Purpose: Complete the TypeScript compilation cleanup for all view and test components
Output: All view components and test files compiling cleanly without type errors
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/32-multi-environment-debugging/32-06-SUMMARY.md
@.planning/phases/32-multi-environment-debugging/32-VERIFICATION.md

# Gap context: After interface fixes, remaining errors are in view components:
# - Missing 'wells' property on PAFVContextValue interface
# - Prop interface mismatches in Enhanced view components
# - Type errors with Node interface in test components
# - Implicit any types in D3 view chip handlers
</context>

<tasks>

<task type="auto">
  <name>Fix PAFVContextValue interface and D3 view component issues</name>
  <files>src/components/views/D3GridView.tsx, src/components/views/D3ListView.tsx</files>
  <action>
    Fix TypeScript errors in D3 view components:

    1. Add missing 'wells' property to PAFVContextValue interface or remove usage if not needed
    2. Remove unused variables: isLive, connectionState, nativeGestureState, transform
    3. Fix implicit any types in chip handlers by adding proper type annotations
    4. Ensure all D3 operations have proper type safety

    For chip handlers, add proper typing:
    - Parameter 'chip' should have explicit type instead of implicit any
    - Use appropriate interface type for chip data

    Check if 'wells' property is actually needed in PAFVContext or if the usage should be removed.

    Gap reason: D3 view components have multiple TypeScript errors preventing compilation
    Reference existing code: D3 Canvas component patterns for proper D3 TypeScript usage
  </action>
  <verify>npx tsc --noEmit src/components/views/D3GridView.tsx src/components/views/D3ListView.tsx</verify>
  <done>D3GridView and D3ListView compile without TypeScript errors</done>
</task>

<task type="auto">
  <name>Fix Enhanced view component prop interfaces</name>
  <files>src/components/views/EnhancedGridView.tsx, src/components/views/EnhancedListView.tsx, src/components/views/EnhancedNetworkView.tsx</files>
  <action>
    Fix prop interface mismatches in Enhanced view components:

    1. Update GridViewProps interface to include 'data' property or modify component usage
    2. Update ListViewProps interface to include 'data' property or modify component usage
    3. Remove unused imports like connectionSuggestionService in EnhancedNetworkView
    4. Ensure onNodeClick handlers have proper type signatures

    Check the actual GridViewProps and ListViewProps interfaces to see if they should include:
    - data: Node[]
    - onNodeClick: (node: Node) => void

    Or if the component usage should be modified to match existing interfaces.

    Gap reason: Component prop usage doesn't match interface definitions
    Reference existing code: Other view components for proper prop interface patterns
  </action>
  <verify>npx tsc --noEmit src/components/views/EnhancedGridView.tsx src/components/views/EnhancedListView.tsx src/components/views/EnhancedNetworkView.tsx</verify>
  <done>Enhanced view components compile without prop interface errors</done>
</task>

<task type="auto">
  <name>Fix test and utility component TypeScript errors</name>
  <files>src/components/test/LiveQueryTest.tsx, src/components/Toolbar.tsx, src/components/UnifiedApp.tsx</files>
  <action>
    Fix remaining TypeScript errors in test and utility components:

    1. LiveQueryTest.tsx:
       - Remove unused React import if only used for types
       - Remove unused testConnection parameter or prefix with underscore
       - Fix Node interface usage - remove 'title' property if it doesn't exist in Node type

    2. Toolbar.tsx:
       - Remove unused FileUp import

    3. UnifiedApp.tsx:
       - Remove unused NotificationSystem import
       - Remove unused state variables: rightSidebarCollapsed, setRightSidebarCollapsed, prepareManualResolution

    Focus on cleaning unused imports and ensuring all property access aligns with actual type definitions.

    Gap reason: Test and utility components have unused imports and type mismatches
    Reference existing code: Node interface definition for proper property usage
  </action>
  <verify>npx tsc --noEmit src/components/test/LiveQueryTest.tsx src/components/Toolbar.tsx src/components/UnifiedApp.tsx</verify>
  <done>Test and utility components compile without TypeScript errors</done>
</task>

</tasks>

<verification>
1. All view components compile without TypeScript errors
2. Enhanced view component props align with interface definitions
3. D3 view components have proper type annotations
4. Test components use correct Node interface properties
5. No unused imports or variables remain in any files
</verification>

<success_criteria>
- All view components in src/components/views/ compile cleanly
- Test components have proper type usage
- Prop interfaces match component usage patterns
- D3 view components have proper type safety
- Zero TypeScript compilation errors in all modified files
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-08-SUMMARY.md`
</output>