---
phase: 32-multi-environment-debugging
plan: 04
type: execute
wave: 3
depends_on: [32-01, 32-02, 32-03]
files_modified: [
  "src/components/notebook/NotebookLayout.tsx",
  "src/components/shell/Terminal.tsx",
  "src/components/chrome/Sidebar.tsx",
  "src/components/chrome/HeaderBar.tsx",
  "package.json"
]
autonomous: false

must_haves:
  truths:
    - "React UI chrome components render without layout issues"
    - "Notebook interface displays properly with all panels"
    - "Terminal component integrates correctly with shell functionality"
  artifacts:
    - path: "src/components/notebook/NotebookLayout.tsx"
      provides: "Three-panel notebook layout"
      min_lines: 300
    - path: "src/components/shell/Terminal.tsx"
      provides: "Terminal emulator integration"
      min_lines: 200
    - path: "src/components/chrome/Sidebar.tsx"
      provides: "Navigation chrome UI"
      min_lines: 150
  key_links:
    - from: "NotebookLayout.tsx"
      to: "Terminal.tsx"
      via: "Shell panel integration"
      pattern: "Terminal.*component"
    - from: "HeaderBar.tsx"
      to: "Sidebar.tsx"
      via: "Chrome layout coordination"
      pattern: "sidebar.*state"
---

<objective>
Fix React UI chrome components and layout issues for a working development environment

Purpose: Ensure UI chrome renders properly and provides usable development interface
Output: Functional React UI with working notebook, terminal, and navigation components
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix NotebookLayout component integration</name>
  <files>src/components/notebook/NotebookLayout.tsx</files>
  <action>
    Fix the three-panel notebook layout:
    1. Ensure proper CSS Grid or Flexbox layout for capture-shell-preview panels
    2. Fix any prop drilling or context integration issues
    3. Verify LiveDataProvider integration for real-time data
    4. Check responsive behavior for different screen sizes
    5. Fix any state management issues between panels
    6. Ensure proper cleanup and memory management

    The NotebookLayout should coordinate the three main panels (capture, shell, preview) with proper data flow and state management.
  </action>
  <verify>npm run dev && curl -s http://localhost:5173/notebook | grep -q "notebook-layout\|three-panel" && echo "NotebookLayout renders"</verify>
  <done>NotebookLayout renders all three panels correctly with proper layout and data flow</done>
</task>

<task type="auto">
  <name>Task 2: Verify Terminal component functionality</name>
  <files>src/components/shell/Terminal.tsx</files>
  <action>
    Ensure Terminal component works properly:
    1. Check @xterm/xterm integration and WebSocket connections
    2. Verify command execution and output display
    3. Fix any Claude Code API integration issues
    4. Ensure proper terminal sizing and responsiveness
    5. Check command history persistence and navigation
    6. Verify terminal theme integration with app theme system

    Terminal should provide working command execution environment within the notebook shell panel.
  </action>
  <verify>npm run build && grep -q "xterm\|terminal" dist/assets/*.js && echo "Terminal component bundled correctly"</verify>
  <done>Terminal component provides functional command execution interface</done>
</task>

<task type="auto">
  <name>Task 3: Fix chrome components layout coordination</name>
  <files>src/components/chrome/Sidebar.tsx, src/components/chrome/HeaderBar.tsx</files>
  <action>
    Fix UI chrome component coordination:

    Sidebar.tsx:
    1. Ensure proper navigation state management
    2. Fix route integration with React Router
    3. Verify theme toggle and settings integration
    4. Check responsive collapse/expand behavior

    HeaderBar.tsx:
    1. Fix breadcrumb navigation and current context display
    2. Ensure proper coordination with Sidebar state
    3. Verify search integration and global actions
    4. Check theme consistency and responsive behavior

    Both components should coordinate to provide cohesive navigation and layout chrome.
  </action>
  <verify>npm run dev && curl -s http://localhost:5173/ | grep -q "sidebar\|header" && echo "Chrome components render"</verify>
  <done>Sidebar and HeaderBar provide cohesive navigation and layout chrome</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete multi-environment debugging: Swift compilation fixed, TypeScript errors resolved, D3 integration working, React UI chrome functional</what-built>
  <how-to-verify>
    1. Test Swift build: cd native && swift build (should complete without errors)
    2. Test TypeScript compilation: npx tsc --noEmit (should show no errors)
    3. Test React development server: npm run dev (should start on http://localhost:5173)
    4. Navigate to notebook interface: http://localhost:5173/notebook
    5. Verify all three panels render (capture, shell, preview)
    6. Check D3 canvas visualization appears
    7. Test terminal functionality in shell panel
    8. Verify sidebar navigation works
    9. Test theme switching in chrome components
    10. Confirm no console errors in browser developer tools
  </how-to-verify>
  <resume-signal>Type "approved" if all environments work correctly, or describe any remaining issues</resume-signal>
</task>

</tasks>

<verification>
Multi-environment verification:
1. Swift: cd native && swift build (clean)
2. TypeScript: npx tsc --noEmit (clean)
3. React: npm run dev (starts successfully)
4. D3: Canvas renders in browser
5. UI: All chrome components functional
6. Integration: Cross-environment data flow working
</verification>

<success_criteria>
- Swift/iOS/macOS native project compiles cleanly
- TypeScript/React prototype builds without errors
- D3.js visualizations render properly
- React UI chrome provides usable development interface
- Development environment supports parallel work across both environments
- All critical blocking issues resolved
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-04-SUMMARY.md`
</output>