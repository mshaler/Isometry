---
phase: 32-multi-environment-debugging
plan: 16
type: execute
wave: 1
depends_on: []
files_modified:
  - native/Sources/Isometry/Import/NotesAccessManager.swift
  - native/Sources/Isometry/Import/AppleNotesLiveImporter.swift
  - native/Sources/Isometry/Views/Settings/NotesIntegrationView.swift
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "NotesAccessManager conforms to ObservableObject for SwiftUI StateObject compatibility"
    - "AppleNotesLiveImporter conforms to ObservableObject for SwiftUI StateObject compatibility"
    - "NotesIntegrationView can use @StateObject with both Notes actors"
  artifacts:
    - path: "native/Sources/Isometry/Import/NotesAccessManager.swift"
      provides: "ObservableObject conformance with nonisolated access"
      contains: "ObservableObject"
    - path: "native/Sources/Isometry/Import/AppleNotesLiveImporter.swift"
      provides: "ObservableObject conformance with nonisolated access"
      contains: "ObservableObject"
    - path: "native/Sources/Isometry/Views/Settings/NotesIntegrationView.swift"
      provides: "StateObject usage with Notes actors"
      contains: "@StateObject"
  key_links:
    - from: "NotesIntegrationView.swift"
      to: "NotesAccessManager"
      via: "@StateObject conformance"
      pattern: "ObservableObject"
    - from: "NotesIntegrationView.swift"
      to: "AppleNotesLiveImporter"
      via: "@StateObject conformance"
      pattern: "ObservableObject"
---

<objective>
Fix ObservableObject conformance issues preventing SwiftUI StateObject usage with Notes actors.

Purpose: Resolve Swift compilation errors related to missing ObservableObject conformance for NotesAccessManager and AppleNotesLiveImporter actors, enabling proper SwiftUI integration in NotesIntegrationView.
Output: Notes actors conform to ObservableObject and work with SwiftUI @StateObject properties.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Gap closure context from Phase 32 verification:
- Swift compilation errors persist despite enum conflict resolution
- ObservableObject conformance missing for StateObject requirements in SwiftUI views
- NotesIntegrationView cannot use @StateObject with Notes actors
</context>

<tasks>

<task type="auto">
  <name>Add ObservableObject conformance to NotesAccessManager actor</name>
  <files>native/Sources/Isometry/Import/NotesAccessManager.swift</files>
  <action>
    Add ObservableObject conformance to NotesAccessManager actor with nonisolated access patterns:

    1. Add ObservableObject conformance to actor declaration:
       `public actor NotesAccessManager: ObservableObject {`

    2. Add nonisolated @Published properties for SwiftUI binding:
       ```swift
       @Published nonisolated var permissionStatus: PermissionStatus = .notDetermined
       @Published nonisolated var isRequestingPermission: Bool = false
       ```

    3. Add nonisolated access methods for SwiftUI compatibility:
       ```swift
       nonisolated public var currentPermissionStatus: PermissionStatus {
           // Safe nonisolated access to permission status
       }
       ```

    Reference existing Actor isolation patterns from Swift decisions. Maintain thread-safe access while enabling SwiftUI StateObject usage.
    Gap reason: Missing ObservableObject conformance prevents @StateObject usage in NotesIntegrationView.swift
  </action>
  <verify>cd native && swift build --target Isometry 2>&1 | grep -i "NotesAccessManager.*ObservableObject" || echo "No NotesAccessManager ObservableObject errors"</verify>
  <done>NotesAccessManager compiles successfully with ObservableObject conformance, enabling @StateObject usage in SwiftUI</done>
</task>

<task type="auto">
  <name>Add ObservableObject conformance to AppleNotesLiveImporter actor</name>
  <files>native/Sources/Isometry/Import/AppleNotesLiveImporter.swift</files>
  <action>
    Add ObservableObject conformance to AppleNotesLiveImporter actor with nonisolated access patterns:

    1. Add ObservableObject conformance to actor declaration:
       `public actor AppleNotesLiveImporter: ObservableObject {`

    2. Add nonisolated @Published properties for live sync status:
       ```swift
       @Published nonisolated var syncStatus: SyncStatus = .idle
       @Published nonisolated var isLiveSyncEnabled: Bool = false
       @Published nonisolated var performanceMetrics: PerformanceMetrics = PerformanceMetrics()
       ```

    3. Add nonisolated access methods for SwiftUI compatibility:
       ```swift
       nonisolated public var currentSyncStatus: SyncStatus {
           // Safe nonisolated access to sync status
       }
       ```

    Follow same Actor isolation patterns as NotesAccessManager. Maintain thread-safe access while enabling SwiftUI StateObject usage.
    Gap reason: Missing ObservableObject conformance prevents @StateObject usage in NotesIntegrationView.swift
  </action>
  <verify>cd native && swift build --target Isometry 2>&1 | grep -i "AppleNotesLiveImporter.*ObservableObject" || echo "No AppleNotesLiveImporter ObservableObject errors"</verify>
  <done>AppleNotesLiveImporter compiles successfully with ObservableObject conformance, enabling @StateObject usage in SwiftUI</done>
</task>

</tasks>

<verification>
Swift native project compiles successfully:
- `cd native && swift build --target Isometry` completes without ObservableObject conformance errors
- NotesIntegrationView.swift can use @StateObject with both NotesAccessManager and AppleNotesLiveImporter
- Both Notes actors maintain thread safety while providing SwiftUI compatibility
</verification>

<success_criteria>
ObservableObject conformance implemented for Notes actors:
1. NotesAccessManager conforms to ObservableObject with nonisolated access patterns
2. AppleNotesLiveImporter conforms to ObservableObject with nonisolated access patterns
3. NotesIntegrationView can successfully use @StateObject with both actors
4. Swift compilation succeeds without ObservableObject-related errors
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-16-SUMMARY.md`
</output>