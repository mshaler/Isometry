---
phase: 32-multi-environment-debugging
plan: 15
type: execute
wave: 1
depends_on: []
files_modified: [
  "native/Sources/Isometry/Bridge/RealTime/RealTimeConflictResolver.swift",
  "native/Sources/Isometry/Database/DatabaseVersionControl.swift",
  "native/Sources/Isometry/Import/AppleNotesConflictResolver.swift",
  "native/Sources/Isometry/Sync/CloudKitSyncManager.swift",
  "native/Sources/Isometry/Sync/ConflictDetectionService.swift",
  "native/Tests/CloudKitSyncUITests.swift"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Swift compilation completes without enum redeclaration errors"
    - "Each ConflictType enum has unique module-scoped naming"
    - "ResolutionStrategy enums are properly namespaced or consolidated"
    - "LiveDataBridgeError enums do not conflict between modules"
  artifacts:
    - path: "native/Sources/Isometry/Bridge/RealTime/RealTimeConflictResolver.swift"
      provides: "RealTimeConflictResolver with uniquely named conflict types"
      contains: "enum.*ConflictType"
    - path: "native/Sources/Isometry/Database/DatabaseVersionControl.swift"
      provides: "DatabaseVersionControl with non-conflicting enum names"
      contains: "enum.*ConflictType"
    - path: "native/Sources/Isometry/Import/AppleNotesConflictResolver.swift"
      provides: "AppleNotesConflictResolver with module-specific enum names"
      contains: "enum.*ConflictType"
  key_links:
    - from: "ConflictType enum definitions"
      to: "module-specific namespacing"
      via: "unique enum names or nested types"
      pattern: "enum.*ConflictType|ConflictType.*enum"
    - from: "ResolutionStrategy enums"
      to: "consolidated or renamed versions"
      via: "module-specific naming pattern"
      pattern: "enum.*ResolutionStrategy|ResolutionStrategy.*enum"
---

<objective>
Resolve Swift enum namespace conflicts preventing native iOS/macOS compilation by systematically renaming or consolidating conflicting enum declarations across modules.

Purpose: Eliminate type ambiguity from multiple enum redeclarations (ConflictType in 6 files, ResolutionStrategy in 3 files) that block native development.
Output: Clean Swift compilation enabling parallel development across native and prototype environments.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-multi-environment-debugging/32-12-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Consolidate ConflictType enum declarations</name>
  <files>
    native/Sources/Isometry/Bridge/RealTime/RealTimeConflictResolver.swift,
    native/Sources/Isometry/Database/DatabaseVersionControl.swift,
    native/Sources/Isometry/Import/AppleNotesConflictResolver.swift,
    native/Sources/Isometry/Sync/CloudKitSyncManager.swift,
    native/Sources/Isometry/Sync/ConflictDetectionService.swift,
    native/Tests/CloudKitSyncUITests.swift
  </files>
  <action>
    Resolve ConflictType enum redeclaration across 6 files by implementing module-specific enum naming pattern.

    Strategy: Rename each ConflictType enum to be module-specific:
    - RealTimeConflictResolver.swift: ConflictType → RealTimeConflictType
    - DatabaseVersionControl.swift: ConflictType → DatabaseConflictType
    - AppleNotesConflictResolver.swift: ConflictType → NotesConflictType
    - CloudKitSyncManager.swift: ConflictType → CloudKitConflictType
    - ConflictDetectionService.swift: ConflictType → DetectionConflictType
    - CloudKitSyncUITests.swift: ConflictType → UITestConflictType

    For each file:
    1. Rename the enum declaration
    2. Update all references to use the new name within the same file
    3. Update any cross-file references if they exist

    This preserves all existing functionality while eliminating namespace collisions.

    Gap reason: ConflictType enum redeclared in 6 different files causing type ambiguity
  </action>
  <verify>swift build -c debug 2>&1 | grep -c "ambiguous use of 'ConflictType'" || echo "0"</verify>
  <done>ConflictType enums renamed to module-specific names without compilation conflicts</done>
</task>

<task type="auto">
  <name>Resolve ResolutionStrategy enum conflicts</name>
  <files>
    native/Sources/Isometry/Sync/CloudKitConflictResolver.swift,
    native/Sources/Isometry/Bridge/RealTime/RealTimeConflictResolver.swift,
    native/Sources/Isometry/Import/AppleNotesConflictResolver.swift
  </files>
  <action>
    Eliminate ResolutionStrategy enum redeclaration across 3 files using module-specific naming.

    Rename each ResolutionStrategy enum to be module-specific:
    - CloudKitConflictResolver.swift: ResolutionStrategy → CloudKitResolutionStrategy
    - RealTimeConflictResolver.swift: ResolutionStrategy → RealTimeResolutionStrategy
    - AppleNotesConflictResolver.swift: ResolutionStrategy → NotesResolutionStrategy

    For each file:
    1. Update enum declaration name
    2. Update all references within the file to use new name
    3. Verify no cross-file dependencies are broken

    This maintains functional separation while removing type ambiguity.

    Gap reason: ResolutionStrategy enum redeclared in 3 modules causing namespace collision
  </action>
  <verify>swift build -c debug 2>&1 | grep -c "ambiguous use of 'ResolutionStrategy'" || echo "0"</verify>
  <done>ResolutionStrategy enums renamed to module-specific names eliminating compilation conflicts</done>
</task>

<task type="auto">
  <name>Fix LiveDataBridgeError enum redeclaration</name>
  <files>
    native/Sources/Isometry/Bridge/LiveDataMessageHandler.swift,
    native/Sources/Isometry/Bridge/WebViewBridge.swift
  </files>
  <action>
    Resolve LiveDataBridgeError enum redeclaration between LiveDataMessageHandler.swift and WebViewBridge.swift.

    Strategy: Consolidate into single enum definition in shared location or use module-specific names:

    Option 1 (Preferred if enums are identical):
    - Move LiveDataBridgeError to a shared Bridge module file
    - Import in both files that need it

    Option 2 (If enums serve different purposes):
    - Rename in LiveDataMessageHandler.swift: LiveDataBridgeError → MessageHandlerError
    - Rename in WebViewBridge.swift: LiveDataBridgeError → WebViewBridgeError

    Analyze both enum definitions first to determine if they're duplicates or serve different purposes, then apply the appropriate strategy.

    Update all references to use the new naming scheme.

    Gap reason: LiveDataBridgeError enum redeclared between files causing type ambiguity
  </action>
  <verify>swift build -c debug 2>&1 | grep -c "ambiguous use of 'LiveDataBridgeError'" || echo "0"</verify>
  <done>LiveDataBridgeError enum conflicts resolved with proper namespacing or consolidation</done>
</task>

</tasks>

<verification>
Run Swift compilation check:
```bash
cd native && swift build -c debug
```

Should complete without enum ambiguity errors.

Check for remaining enum conflicts:
```bash
cd native && find Sources -name "*.swift" -exec grep -l "enum.*ConflictType\|enum.*ResolutionStrategy\|enum.*LiveDataBridgeError" {} \;
```

Should show only unique enum names per file.
</verification>

<success_criteria>
- Swift compilation completes without enum redeclaration or ambiguity errors
- ConflictType enums have unique module-specific names across all 6 files
- ResolutionStrategy enums are properly differentiated across 3 modules
- LiveDataBridgeError enum conflicts are resolved through consolidation or renaming
- Native iOS/macOS development workflow restored with clean compilation
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-15-SUMMARY.md`
</output>