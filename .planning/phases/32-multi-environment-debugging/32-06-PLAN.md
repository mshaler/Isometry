---
phase: 32-multi-environment-debugging
plan: 06
type: execute
wave: 1
depends_on: []
files_modified: [
  "src/contexts/LiveDataContext.tsx",
  "src/hooks/useLiveQuery.ts",
  "src/context/LiveDataContext.tsx"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "LiveDataContextValue interface includes executeQuery method"
    - "LiveQueryResult interface includes isLoading property alias"
    - "LiveQueryOptions uses consistent property names"
  artifacts:
    - path: "src/contexts/LiveDataContext.tsx"
      provides: "LiveDataContextValue with executeQuery method"
      min_lines: 50
    - path: "src/hooks/useLiveQuery.ts"
      provides: "LiveQueryResult with isLoading compatibility"
      min_lines: 100
  key_links:
    - from: "src/components/settings/NotesIntegrationSettings.tsx"
      to: "LiveDataContextValue.executeQuery"
      via: "context destructuring"
      pattern: "executeQuery.*useLiveDataContext"
    - from: "src/components/SuperGridView.tsx"
      to: "LiveQueryResult.isLoading"
      via: "hook destructuring"
      pattern: "isLoading.*useLiveQuery"
---

<objective>
Fix critical TypeScript interface gaps preventing compilation: add missing executeQuery method to LiveDataContextValue, add isLoading compatibility to LiveQueryResult, and fix property name inconsistencies.

Purpose: Resolve the core interface mismatches that cause compilation failures across components
Output: Updated interface definitions that align with actual component usage patterns
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/32-multi-environment-debugging/32-05-SUMMARY.md
@.planning/phases/32-multi-environment-debugging/32-VERIFICATION.md

# Gap context: TypeScript compilation is failing due to interface mismatches
# From verification: 100+ errors with main issues being missing executeQuery and isLoading properties
</context>

<tasks>

<task type="auto">
  <name>Add executeQuery method to LiveDataContextValue interface</name>
  <files>src/contexts/LiveDataContext.tsx</files>
  <action>
    Add executeQuery method to LiveDataContextValue interface to match usage in NotesIntegrationSettings component.

    In the LiveDataContextValue interface, add:
    - executeQuery: (method: string, params?: unknown) => Promise<any>

    Also implement the executeQuery method in the LiveDataActions interface and the provider implementation to bridge to the actual query execution.

    Gap reason: NotesIntegrationSettings.tsx expects executeQuery on context but interface doesn't include it
    Reference existing code: WebView bridge communication pattern used throughout codebase
  </action>
  <verify>npx tsc --noEmit src/components/settings/NotesIntegrationSettings.tsx</verify>
  <done>NotesIntegrationSettings.tsx compiles without executeQuery property errors</done>
</task>

<task type="auto">
  <name>Add isLoading compatibility to LiveQueryResult interface</name>
  <files>src/hooks/useLiveQuery.ts</files>
  <action>
    Add isLoading property to LiveQueryResult interface as an alias for the existing loading property to maintain backward compatibility.

    In the LiveQueryResult interface, add:
    - isLoading: boolean (alias for loading)

    Update the hook implementation to provide both loading and isLoading with the same value for backward compatibility.

    Also fix the LiveQueryOptions interface to use consistent property naming:
    - Change queryParams to params in components that use the wrong name
    - Or add queryParams as an alias to the interface

    Gap reason: SuperGridView.tsx and other components expect isLoading property but interface only has loading
    Reference existing code: Multiple components destructure isLoading from useLiveQuery results
  </action>
  <verify>npx tsc --noEmit src/components/SuperGridView.tsx</verify>
  <done>SuperGridView.tsx compiles without isLoading property errors</done>
</task>

<task type="auto">
  <name>Fix duplicate LiveDataContext and ensure single source of truth</name>
  <files>src/context/LiveDataContext.tsx</files>
  <action>
    Check if there are duplicate LiveDataContext files and consolidate to single source.

    If both src/context/LiveDataContext.tsx and src/contexts/LiveDataContext.tsx exist:
    - Determine which one is the canonical version (likely src/contexts/ based on recent usage)
    - Ensure all imports point to the canonical version
    - Remove or deprecate the duplicate file
    - Update any imports that reference the old location

    This prevents interface confusion and ensures all components use the same context definition.

    Gap reason: Multiple LiveDataContext files found which can cause interface conflicts
    Reference existing code: Standardize on src/contexts/ directory structure used by other context files
  </action>
  <verify>find src -name "*LiveDataContext*" -type f | wc -l</verify>
  <done>Single LiveDataContext file exists and all imports reference canonical location</done>
</task>

</tasks>

<verification>
1. TypeScript compilation succeeds for NotesIntegrationSettings.tsx
2. TypeScript compilation succeeds for SuperGridView.tsx
3. No duplicate LiveDataContext files exist
4. Interface definitions align with component usage patterns
</verification>

<success_criteria>
- executeQuery method available on LiveDataContextValue interface
- isLoading property available on LiveQueryResult interface
- Consistent property naming across LiveQueryOptions
- Elimination of core interface mismatch compilation errors
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-06-SUMMARY.md`
</output>