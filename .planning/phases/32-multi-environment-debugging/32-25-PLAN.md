---
phase: 32-multi-environment-debugging
plan: 25
type: execute
wave: 1
depends_on: []
files_modified: [
  "src/examples/ProductionVisualizationDemo.tsx",
  "src/hooks/useConflictResolution.ts",
  "src/hooks/useD3Canvas.ts",
  "src/hooks/useDemoData.ts",
  "src/types/pafv.ts"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "TypeScript compilation completes with zero errors"
    - "Node type interfaces are consistent across all demo and production code"
    - "ConflictInfo interface has proper optional property handling"
    - "PAFV types export required components (Chip added, Wells removed if undefined)"
  artifacts:
    - path: "src/types/pafv.ts"
      provides: "Chip export for D3 components"
      exports: ["Chip"]
    - path: "src/hooks/useConflictResolution.ts"
      provides: "ConflictInfo interface with optional properties"
      contains: "recordId?: string"
    - path: "src/hooks/useDemoData.ts"
      provides: "Complete Node objects with all required properties"
      min_lines: 50
    - path: "src/examples/ProductionVisualizationDemo.tsx"
      provides: "Performance metrics with consistent property names"
      contains: "currentFPS"
  key_links:
    - from: "src/hooks/useD3Canvas.ts"
      to: "src/types/pafv.ts"
      via: "import { Chip } from '../types/pafv'"
      pattern: "import.*Chip.*pafv"
    - from: "src/hooks/useConflictResolution.ts"
      to: "ConflictInfo interface"
      via: "optional property definitions"
      pattern: "recordId\\?:|type\\?:|fieldName\\?:"
---

<objective>
Complete TypeScript compilation gap closure by fixing the final 81 type errors

Purpose: Eliminate remaining TypeScript compilation errors that prevent clean development workflow
Output: Zero TypeScript compilation errors and stable development environment
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-multi-environment-debugging/32-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Fix Node type interface completeness</name>
  <files>src/hooks/useDemoData.ts</files>
  <action>
    Fix Node type interface mismatches identified in verification report:

    1. Add missing required properties to Node objects in demo data:
       - summary: string
       - latitude: number | null
       - longitude: number | null
       - Any other properties required by Node interface but missing from demo objects

    2. Review Node interface definition to ensure demo data matches exactly
    3. Use consistent property naming (name vs title, modifiedAt vs modified_at)
    4. Ensure all Node objects have complete property sets, not partial objects

    Reference gap: "Node type interface mismatch - missing required properties (summary, latitude, longitude, etc.)"
  </action>
  <verify>npm run typecheck 2>&1 | grep -c "useDemoData.ts" should return 0</verify>
  <done>useDemoData.ts contributes zero TypeScript errors to compilation</done>
</task>

<task type="auto">
  <name>Add missing PAFV type exports and resolve Wells issue</name>
  <files>src/types/pafv.ts</files>
  <files>src/hooks/useD3Canvas.ts</files>
  <action>
    Fix missing type exports identified in useD3Canvas.ts:

    1. Add Chip type/interface export if missing:
       - Define Chip interface with required properties
       - Export Chip from types/pafv module

    2. Resolve Wells type issue per verification finding that Wells is "undefined/unused":
       - Remove Wells references from useD3Canvas.ts imports
       - Remove any unused Wells type definition from pafv.ts
       - Clean up any related unused code

    3. Ensure all PAFV-related types are properly exported for D3 component usage

    Reference gap: "Missing 'Chip' export from types/pafv and undefined 'Wells' type/usage"
    Note: Verification shows Wells should be removed as undefined, not exported.
  </action>
  <verify>npm run typecheck 2>&1 | grep -c "useD3Canvas.ts.*'Chip'\|'Wells'" should return 0</verify>
  <done>PAFV types module exports required components and removes undefined types without import errors</done>
</task>

<task type="auto">
  <name>Fix ConflictInfo interface property access</name>
  <files>src/hooks/useConflictResolution.ts</files>
  <action>
    Fix property access errors on Partial<ConflictInfo> type:

    1. Make ConflictInfo interface properties optional at definition level:
       - recordId?: string | undefined
       - type?: string | undefined
       - fieldName?: string | undefined
       - clientValue?: any | undefined
       - serverValue?: any | undefined

    2. Use safe property access patterns:
       - Optional chaining: conflict?.recordId
       - Nullish coalescing: conflict.recordId ?? ''
       - Type guards where appropriate

    3. Ensure Partial<ConflictInfo> usage is consistent with actual property access

    Reference gap: "Property access errors on Partial<ConflictInfo> type: recordId, type, fieldName, clientValue, serverValue"
  </action>
  <verify>npm run typecheck 2>&1 | grep -c "useConflictResolution.ts" should return 0</verify>
  <done>ConflictInfo interface allows safe property access without compilation errors</done>
</task>

<task type="auto">
  <name>Fix performance metrics property consistency</name>
  <files>src/examples/ProductionVisualizationDemo.tsx</files>
  <action>
    Fix performance metrics property name mismatches and null safety:

    1. Resolve property name inconsistencies:
       - Standardize on currentFPS vs lastFPS
       - Standardize on lastRenderTime vs renderTime
       - Use consistent property names matching interface definitions

    2. Fix null safety issues with nodes array:
       - Use defensive pattern: (nodes || [])
       - Add null checking before array operations
       - Ensure nodes array is never undefined in render logic

    3. Verify performance metrics object matches expected interface

    Reference gap: "Null safety issues with nodes array, property name mismatches (currentFPS/lastRenderTime)"
  </action>
  <verify>npm run typecheck 2>&1 | grep -c "ProductionVisualizationDemo.tsx" should return 0</verify>
  <done>Production visualization demo compiles without null safety or property mismatch errors</done>
</task>

</tasks>

<verification>
Run full TypeScript compilation check:
```bash
npm run typecheck
```

Verify error count reduction:
```bash
npm run typecheck 2>&1 | grep -E "error TS[0-9]+" | wc -l
```

Should return 0 errors for complete TypeScript compilation success.
</verification>

<success_criteria>
- TypeScript compilation completes with zero errors
- All demo data objects have complete Node interface properties
- PAFV types export required components (Chip) and remove undefined types (Wells)
- ConflictInfo interface supports safe property access with optional property definitions
- Performance metrics use consistent property names without null safety issues
- Development environment ready for parallel development workflow
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-25-SUMMARY.md`
</output>