---
phase: 32-multi-environment-debugging
plan: 19
type: execute
wave: 1
depends_on: []
files_modified: [
  src/components/views/NetworkView.tsx,
  src/hooks/useSupabaseAuth.tsx,
  src/hooks/useNodeEvents.ts,
  src/hooks/useD3.tsx,
  src/components/views/GridView.tsx,
  src/components/supergrid/SuperGrid.tsx
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "NetworkView D3 component renders without unknown type casting issues"
    - "TypeScript compilation errors reduced below 100 (current 177)"
    - "Unused variable warnings eliminated from compilation output"
  artifacts:
    - path: "src/components/views/NetworkView.tsx"
      provides: "D3 visualization with proper type safety"
      contains: "FlexibleSelection types, no unknown casting"
    - path: "Multiple TypeScript files"
      provides: "Clean compilation output"
      contains: "No unused variable declarations"
  key_links:
    - from: "src/components/views/NetworkView.tsx"
      to: "src/types/d3.ts"
      via: "FlexibleSelection type imports"
      pattern: "FlexibleSelection|SVGSelection|GroupSelection"
---

<objective>
Fix TypeScript compilation errors by resolving D3 type casting issues and cleaning up unused variables across the codebase.

Purpose: Achieve clean TypeScript compilation for stable multi-environment debugging
Output: Sub-100 TypeScript errors and proper D3 type safety in NetworkView
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-multi-environment-debugging/32-17-SUMMARY.md
@.planning/phases/32-multi-environment-debugging/32-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix D3 type casting in NetworkView component</name>
  <files>src/components/views/NetworkView.tsx</files>
  <action>
    Replace remaining 'unknown' type casting with proper FlexibleSelection types from src/types/d3.ts. From Plan 32-17 summary, we have established:
    - FlexibleSelection<T> for mixed selection types
    - SVGSelection, GroupSelection, ContainerSelection for specific use cases
    - Type assertion pattern: use these aliases instead of 'unknown' casting

    Specifically address the verification gap: "D3 Selection type casting issues with unknown types"
    - Find all instances of `as unknown as` in D3 selection operations
    - Replace with appropriate FlexibleSelection or specific aliases
    - Ensure D3 operations maintain functionality while gaining type safety
    - Test that zoom/pan behaviors still work correctly
  </action>
  <verify>npm run type-check 2>&1 | grep -c "NetworkView.tsx" | test $(cat) -eq 0</verify>
  <done>NetworkView component compiles without D3 type casting errors and maintains D3 functionality</done>
</task>

<task type="auto">
  <name>Task 2: Systematic unused variable cleanup</name>
  <files>src/hooks/useSupabaseAuth.tsx, src/hooks/useNodeEvents.ts, src/hooks/useD3.tsx, src/components/views/GridView.tsx, src/components/supergrid/SuperGrid.tsx</files>
  <action>
    Clean up the remaining 177 TypeScript errors systematically:
    1. Run `npm run type-check` to identify exact error locations
    2. Address each category:
       - Remove unused import statements
       - Remove unused variable declarations
       - Fix type argument mismatches
       - Remove unused interface properties that don't align with actual usage

    Focus on high-impact files that generate many errors. Common patterns:
    - Unused React imports (useState, useEffect when not used)
    - Unused utility imports from libs
    - Variables declared but never read
    - Type parameters that don't match usage

    Target: Reduce from 177 to under 100 errors (55%+ improvement).
  </action>
  <verify>ERROR_COUNT=$(npm run type-check 2>&1 | grep -c "error TS"); test $ERROR_COUNT -lt 100</verify>
  <done>TypeScript compilation errors reduced below 100 with systematic cleanup of unused variables and imports</done>
</task>

</tasks>

<verification>
Run `npm run type-check` and verify:
1. No NetworkView D3 type casting errors remain
2. Total TypeScript error count is below 100
3. Development server starts without compilation warnings: `npm run dev`
</verification>

<success_criteria>
TypeScript compilation environment stabilized with clean D3 type safety and systematic error reduction enabling productive multi-environment debugging.
</success_criteria>

<output>
After completion, create `.planning/phases/32-multi-environment-debugging/32-19-SUMMARY.md`
</output>