---
phase: 30.1-core-architecture-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [
  "src/hooks/useSupergridCoordinates.ts",
  "src/components/supergrid/SuperGridContainer.tsx",
  "src/types/coordinates.ts"
]
autonomous: true

must_haves:
  truths:
    - "SuperGridContainer renders 4-quadrant layout structure"
    - "Coordinate system provides consistent positioning across quadrants"
    - "Component follows established React/D3 integration patterns"
  artifacts:
    - path: "src/hooks/useSupergridCoordinates.ts"
      provides: "Coordinate system integration hook"
      exports: ["useSupergridCoordinates"]
    - path: "src/components/supergrid/SuperGridContainer.tsx"
      provides: "Main SuperGrid orchestrator component"
      exports: ["SuperGridContainer"]
    - path: "src/types/coordinates.ts"
      provides: "Enhanced coordinate system types"
      contains: "SuperGridCoordinateSystem"
  key_links:
    - from: "src/components/supergrid/SuperGridContainer.tsx"
      to: "src/hooks/useSupergridCoordinates.ts"
      via: "hook consumption"
      pattern: "useSupergridCoordinates\\("
    - from: "src/hooks/useSupergridCoordinates.ts"
      to: "src/utils/coordinate-system.ts"
      via: "existing coordinate utilities"
      pattern: "createCoordinateSystem"
---

<objective>
Establish SuperGrid foundation with coordinate system integration and container component structure.

Purpose: Create the core architecture foundation for 4-quadrant SuperGrid layout with proper coordinate system binding and TypeScript type safety.
Output: Working SuperGridContainer component with integrated coordinate system hook following established project patterns.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30.1-core-architecture-setup/30.1-RESEARCH.md

# Existing foundation patterns
@src/components/MiniNav.tsx
@src/components/D3SparsityLayer.tsx
@src/hooks/useGridCoordinates.ts
@src/utils/coordinate-system.ts
@src/types/coordinates.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useSupergridCoordinates Hook</name>
  <files>src/hooks/useSupergridCoordinates.ts</files>
  <action>
    Create a React hook that integrates with existing coordinate system utilities for SuperGrid usage. Follow the pattern established in useGridCoordinates.ts but extend for 4-quadrant coordination needs.

    Hook interface should include:
    - Accept CoordinateConfig with pattern, cellWidth, cellHeight
    - Return both full and simple coordinate systems for different component needs
    - Provide setPattern and setCellSize update functions using useCallback
    - Use useMemo for coordinate system calculations to prevent unnecessary re-renders
    - Import and leverage existing createCoordinateSystem from coordinate-system.ts

    Follow established patterns:
    - Use useState for config management
    - Use useMemo for expensive coordinate calculations
    - Use useCallback for stable update functions
    - Export both hook and related types
    - Add TypeScript JSDoc comments for the hook interface
  </action>
  <verify>Import hook in a test component and verify it returns expected coordinate system structure</verify>
  <done>useSupergridCoordinates hook exports properly, returns full/simple coordinate systems, and provides stable update functions</done>
</task>

<task type="auto">
  <name>Task 2: Create SuperGridContainer Component</name>
  <files>src/components/supergrid/SuperGridContainer.tsx</files>
  <action>
    Create the main SuperGrid container component that orchestrates the 4-quadrant layout. Follow established React component patterns from the codebase.

    Component requirements:
    - Accept data (Node[]), initialPAFVState, and onSelectionChange props following project patterns
    - Use useSupergridCoordinates hook for coordinate system integration
    - Implement CSS Grid layout with 4 distinct quadrants (2x2 grid)
    - Render placeholder divs for each quadrant with proper CSS classes
    - Include quadrant-1 through quadrant-4 class names for styling
    - Add data-testid attributes for each quadrant for testing
    - Use TypeScript with proper interface for props
    - Follow naming conventions: PascalCase component, camelCase props
    - Add JSDoc comments explaining the 4-quadrant structure

    CSS classes to use:
    - .supergrid-container (main container)
    - .supergrid-quadrant-1, .supergrid-quadrant-2, etc. (individual quadrants)
    - Follow existing CSS naming patterns in the project

    Do NOT yet integrate MiniNav or DataCells - this task focuses on container structure only.
  </action>
  <verify>Component renders 4 distinct divs in grid layout and useSupergridCoordinates integration compiles without errors</verify>
  <done>SuperGridContainer displays 4-quadrant CSS grid layout with coordinate system integration and follows established component patterns</done>
</task>

<task type="auto">
  <name>Task 3: Enhance Coordinate System Types</name>
  <files>src/types/coordinates.ts</files>
  <action>
    Enhance existing coordinate system types to support SuperGrid requirements while maintaining backward compatibility.

    Add interface extensions:
    - SuperGridCoordinateSystem interface that extends existing CoordinateSystem
    - CoordinateConfig interface for useSupergridCoordinates configuration
    - QuadrantCoordinate interface for quadrant-specific positioning
    - Maintain all existing exports for backward compatibility

    Follow established patterns:
    - Use interface extension rather than replacement
    - Add proper TypeScript JSDoc comments
    - Export new interfaces alongside existing ones
    - Follow camelCase naming for interface properties
    - Use OriginPattern type from existing coordinates for consistency

    The new interfaces should support:
    - Multi-quadrant coordinate mapping
    - Configuration options for the useSupergridCoordinates hook
    - Quadrant-specific coordinate calculations
  </action>
  <verify>TypeScript compilation passes and existing coordinate system imports still work</verify>
  <done>Enhanced coordinate types support SuperGrid requirements while maintaining full backward compatibility</done>
</task>

</tasks>

<verification>
- SuperGridContainer component renders without errors
- useSupergridCoordinates hook provides expected interface
- Type definitions support both existing and new SuperGrid patterns
- CSS Grid layout displays 4 distinct quadrants
- All components follow established project conventions
</verification>

<success_criteria>
- SuperGridContainer renders 4-quadrant layout structure
- Coordinate system integration provides consistent positioning foundation
- Component architecture follows established React/TypeScript patterns
- Type safety maintained throughout the implementation
- Foundation established for subsequent component integration
</success_criteria>

<output>
After completion, create `.planning/phases/30.1-core-architecture-setup/30.1-01-SUMMARY.md`
</output>