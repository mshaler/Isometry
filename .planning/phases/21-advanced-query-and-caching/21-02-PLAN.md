---
phase: 21-advanced-query-and-caching
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [
  "package.json",
  "src/main.tsx",
  "src/App.tsx"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "TanStack packages are installed and available for import"
    - "TanStackQueryProvider wraps the application root"
    - "React DevTools integration shows TanStack Query tab in development"
  artifacts:
    - path: "package.json"
      provides: "TanStack dependencies"
      contains: "@tanstack/react-query@5.90.20"
    - path: "src/main.tsx"
      provides: "Provider integration"
      contains: "TanStackQueryProvider"
  key_links:
    - from: "src/main.tsx"
      to: "TanStackQueryProvider"
      via: "import and wrapper"
      pattern: "import.*TanStackQueryProvider"
---

<objective>
Install missing TanStack dependencies and integrate providers to make advanced caching infrastructure operational

Purpose: Close verification gaps by installing the required packages and integrating the existing provider components into the application root
Output: Operational TanStack Query infrastructure with React DevTools integration
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-advanced-query-and-caching/21-01-SUMMARY.md
@src/cache/TanStackQueryProvider.tsx
@src/main.tsx
</context>

<tasks>

<task type="auto">
  <name>Install Missing TanStack Dependencies</name>
  <files>package.json</files>
  <action>
    Install the exact TanStack packages that were identified as missing from verification:
    - @tanstack/react-query@5.90.20 (main query library)
    - @tanstack/react-virtual@3.13.18 (virtual scrolling)
    - @tanstack/react-query-devtools (development tools)
    - exponential-backoff@3.1.3 (retry logic support)
    - react-internet-meter@1.1.1 (connection quality monitoring)

    Run: npm install @tanstack/react-query@5.90.20 @tanstack/react-virtual@3.13.18 exponential-backoff@3.1.3 react-internet-meter@1.1.1 @tanstack/react-query-devtools

    These packages are required for the existing components to compile and function properly.
  </action>
  <verify>npm list | grep -E "(tanstack|exponential-backoff|react-internet-meter)"</verify>
  <done>All required TanStack and supporting packages are installed and listed in package.json dependencies</done>
</task>

<task type="auto">
  <name>Integrate TanStackQueryProvider into Application Root</name>
  <files>src/main.tsx</files>
  <action>
    Modify main.tsx to wrap the App component with TanStackQueryProvider. The provider component already exists and is properly configured with intelligent cache settings.

    Add import: import { TanStackQueryProvider } from './cache/TanStackQueryProvider';
    Wrap App component: <TanStackQueryProvider><App /></TanStackQueryProvider>

    This enables the TanStack Query infrastructure throughout the application and provides React DevTools integration in development mode.
  </action>
  <verify>grep -n "TanStackQueryProvider" src/main.tsx</verify>
  <done>TanStackQueryProvider wraps the App component in main.tsx and React DevTools show TanStack Query tab in development</done>
</task>

</tasks>

<verification>
1. Check that npm install completed successfully: npm list | grep tanstack
2. Verify React DevTools shows TanStack Query tab when running npm run dev
3. Confirm no import errors when starting development server
</verification>

<success_criteria>
- All TanStack packages (@tanstack/react-query, @tanstack/react-virtual, @tanstack/react-query-devtools) are installed
- Supporting packages (exponential-backoff, react-internet-meter) are installed
- TanStackQueryProvider successfully wraps the application without errors
- Development server starts without import errors
- React DevTools displays TanStack Query tab for cache inspection
</success_criteria>

<output>
After completion, create `.planning/phases/21-advanced-query-and-caching/21-02-SUMMARY.md`
</output>