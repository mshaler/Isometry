---
phase: 10-foundation-cleanup
plan: 22
type: execute
wave: 1
depends_on: []
files_modified: [src/components/SQLiteImportWizard.tsx, src/components/Sidebar.tsx, src/components/demo/CbCanvasDemo.tsx]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "TypeScript strict mode errors significantly reduced from 415 count"
    - "SQLiteImportWizard.tsx compiles without interface property errors"
    - "Sidebar.tsx QueryOptions type mismatches resolved"
    - "CbCanvasDemo.tsx D3 selection type compatibility improved"
  artifacts:
    - path: "src/components/SQLiteImportWizard.tsx"
      provides: "Correct SQLiteSyncOptions and SQLiteSyncResult interfaces"
      contains: "proper batchSize and imported properties"
    - path: "src/components/Sidebar.tsx"
      provides: "Type-safe QueryOptions usage"
      contains: "correct generic type parameters"
    - path: "src/components/demo/CbCanvasDemo.tsx"
      provides: "Compatible D3 selection types"
      contains: "NodeValue type definition"
  key_links:
    - from: "SQLiteImportWizard.tsx"
      to: "SQLiteSyncOptions interface"
      via: "property type definitions"
      pattern: "batchSize.*imported.*failed properties"
    - from: "Sidebar.tsx"
      to: "QueryOptions generic"
      via: "type parameter matching"
      pattern: "QueryOptions<T> where T matches data structure"
---

<objective>
Resolve critical TypeScript strict mode compilation errors in high-impact components to significantly reduce the 415 error count.

Purpose: Address the major TypeScript strict mode blocking errors in SQLite, UI, and D3 components to establish compilable foundation for remaining strict mode work.
Output: Three core components with resolved type interfaces, substantially reducing overall TypeScript strict mode error count.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-foundation-cleanup/10-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Fix SQLiteImportWizard TypeScript interface errors</name>
  <files>src/components/SQLiteImportWizard.tsx</files>
  <action>
    Resolve SQLiteSyncOptions and SQLiteSyncResult interface property mismatches causing strict mode compilation failures.

    Current errors:
    - 'batchSize' does not exist in type 'SQLiteSyncOptions'
    - 'SQLiteSyncManager' cannot be found
    - 'imported' and 'failed' do not exist in type 'SQLiteSyncResult'

    Fix approach:
    1. Define or import proper SQLiteSyncOptions interface with batchSize property
    2. Add SQLiteSyncManager type definition or import
    3. Extend SQLiteSyncResult interface to include imported, failed properties
    4. Ensure all property access matches interface definitions

    Gap reason: Type mismatches in SQLiteSyncOptions and SQLiteSyncResult properties
  </action>
  <verify>npx tsc --noEmit --strict src/components/SQLiteImportWizard.tsx</verify>
  <done>SQLiteImportWizard.tsx compiles without type errors under strict mode</done>
</task>

<task type="auto">
  <name>Resolve Sidebar QueryOptions type compatibility</name>
  <files>src/components/Sidebar.tsx</files>
  <action>
    Fix QueryOptions type parameter mismatches causing multiple strict mode compilation failures.

    Current errors:
    - Array types have no properties in common with QueryOptions<T>
    - Type mismatch between data arrays and expected QueryOptions generic

    Fix approach:
    1. Correct QueryOptions generic type parameters to match actual data structure
    2. Ensure ColumnInfo, FacetValue types align with query data arrays
    3. Fix temporal data QueryOptions type to match min_date/max_date structure
    4. Apply proper type assertions or interface matching

    Gap reason: Property type mismatches and missing required properties
  </action>
  <verify>npx tsc --noEmit --strict src/components/Sidebar.tsx</verify>
  <done>Sidebar.tsx compiles without QueryOptions type errors under strict mode</done>
</task>

<task type="auto">
  <name>Fix D3 CbCanvasDemo selection type compatibility</name>
  <files>src/components/demo/CbCanvasDemo.tsx</files>
  <action>
    Resolve D3 selection type incompatibilities and missing NodeValue type definition.

    Current errors:
    - Cannot find name 'NodeValue'
    - CardRenderer type conversion compatibility issues with D3 Selection
    - SVGGElement vs HTMLDivElement type mismatches in selection signatures

    Fix approach:
    1. Define NodeValue type or import from appropriate D3 types module
    2. Create proper CardRenderer interface compatible with D3 Selection signatures
    3. Resolve SVGGElement/HTMLDivElement selection type conflicts
    4. Ensure consistent D3 selection type usage throughout component

    Gap reason: Type incompatibilities in D3 extent and scale functions
  </action>
  <verify>npx tsc --noEmit --strict src/components/demo/CbCanvasDemo.tsx</verify>
  <done>CbCanvasDemo.tsx compiles without D3 selection type errors under strict mode</done>
</task>

</tasks>

<verification>
- TypeScript strict mode error count measurably reduced from 415
- All three target files compile successfully under strict mode
- No functional regression in SQLite import, sidebar filtering, or D3 demos
- Established foundation for completing remaining strict mode compliance
</verification>

<success_criteria>
- SQLiteImportWizard.tsx: 0 type errors (from ~6 interface errors)
- Sidebar.tsx: 0 type errors (from ~5 QueryOptions errors)
- CbCanvasDemo.tsx: 0 type errors (from ~2 D3 selection errors)
- Overall TypeScript strict mode error reduction: >20% improvement toward zero
- All components maintain functional behavior without type regression
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-cleanup/10-22-SUMMARY.md`
</output>