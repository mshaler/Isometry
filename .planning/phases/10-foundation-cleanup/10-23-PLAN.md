---
phase: 10-foundation-cleanup
plan: 23
type: execute
wave: 2
depends_on: [10-22]
files_modified: [src/utils/d3Scales.ts, src/utils/d3Testing.ts, src/types/d3.ts, src/types/lpg.ts, src/utils/sync-manager.ts]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "TypeScript compiler produces no errors with strict mode enabled"
    - "Zero explicit any warnings remain in codebase"
    - "D3 utilities compile successfully under strict mode"
    - "All type definitions properly interface-based"
  artifacts:
    - path: "src/utils/d3Scales.ts"
      provides: "Type-safe D3 scale and extent operations"
      contains: "proper generic type constraints"
    - path: "src/utils/d3Testing.ts"
      provides: "Complete test interface definitions"
      contains: "all required properties defined"
    - path: "src/types/d3.ts"
      provides: "Comprehensive D3 type definitions"
      excludes: "any explicit any types"
    - path: "src/types/lpg.ts"
      provides: "Complete graph type interfaces"
      excludes: "any explicit any types"
    - path: "src/utils/sync-manager.ts"
      provides: "Type-safe synchronization utilities"
      excludes: "any explicit any types"
  key_links:
    - from: "d3Scales.ts"
      to: "D3 extent/scale APIs"
      via: "proper generic type parameters"
      pattern: "d3\\.extent<T>.*d3\\.scale.*"
    - from: "All utility modules"
      to: "TypeScript strict compiler"
      via: "complete type safety"
      pattern: "zero compilation errors"
---

<objective>
Complete TypeScript strict mode compliance by resolving all remaining type safety issues and eliminating explicit any types.

Purpose: Achieve the Phase 10 Foundation Cleanup goal of absolute TypeScript strict mode compliance, building upon the high-impact component fixes from Plan 10-22.
Output: Complete TypeScript strict mode foundation with zero compilation errors and zero explicit any types across all modules.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-foundation-cleanup/10-VERIFICATION.md
@.planning/phases/10-foundation-cleanup/10-22-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Complete D3 utilities TypeScript strict compliance</name>
  <files>src/utils/d3Scales.ts, src/utils/d3Testing.ts</files>
  <action>
    Resolve all TypeScript strict mode errors in D3 utility modules using proper type definitions and generic constraints.

    Current issues in d3Scales.ts:
    - Type incompatibilities in D3 extent and scale functions
    - Missing generic type constraints for data processing

    Current issues in d3Testing.ts:
    - Property type mismatches and missing required properties
    - Incomplete interface definitions for test utilities

    Fix approach:
    1. Define proper generic type parameters for D3 extent operations
    2. Create complete interfaces for all D3 testing utilities
    3. Ensure all properties have proper type definitions
    4. Apply established IIFE patterns with fallback domains (from previous Phase 10 work)
    5. Use explicit undefined guards and type casting for safe operations

    Reference existing patterns from Phase 10 work: D3 extent safety, type constraint strategy.
  </action>
  <verify>npx tsc --noEmit --strict src/utils/d3Scales.ts src/utils/d3Testing.ts</verify>
  <done>D3 utility modules compile successfully with zero strict mode errors</done>
</task>

<task type="auto">
  <name>Eliminate remaining explicit any types</name>
  <files>src/types/d3.ts, src/types/lpg.ts, src/utils/sync-manager.ts</files>
  <action>
    Complete elimination of all explicit any types by replacing with proper TypeScript interfaces.

    Target files with remaining explicit any types (18 total from verification):
    - src/types/d3.ts: Core D3 type definitions
    - src/types/lpg.ts: Graph system types
    - src/utils/sync-manager.ts: Synchronization utilities

    Fix approach:
    1. Replace any explicit any types with specific interface definitions
    2. Use Record<string, unknown> for flexible runtime data (established pattern)
    3. Define comprehensive interfaces for D3 and sync utilities
    4. Apply Generic Type Constraint Strategy from accumulated decisions
    5. Use proper interface extension patterns instead of any casting

    Gap reason: 18 explicit any types found (down from 20)
    Reference patterns: Global interface pattern, comprehensive document interfaces, WebView bridge typing.
  </action>
  <verify>grep -r "any" src/types/ src/utils/sync-manager.ts --include="*.ts" | grep -E "(: any|<any>|as any)" | wc -l</verify>
  <done>Zero explicit any types remain in targeted modules</done>
</task>

<task type="auto">
  <name>Verify complete TypeScript strict mode compliance</name>
  <files>src/utils/d3Scales.ts, src/utils/d3Testing.ts, src/types/d3.ts, src/types/lpg.ts, src/utils/sync-manager.ts</files>
  <action>
    Validate that all TypeScript strict mode compilation errors are resolved across the entire codebase.

    Comprehensive verification:
    1. Run full TypeScript strict compilation check
    2. Confirm zero compilation errors achieved
    3. Verify no new explicit any types introduced
    4. Test that all modules maintain functional behavior
    5. Document completion of Phase 10 TypeScript strict mode goal

    Success criteria from verification: TypeScript compiler produces no errors with strict mode enabled.
    Target: Reduce from 415 errors to 0 errors (100% strict mode compliance).
  </action>
  <verify>npx tsc --noEmit --strict 2>&1 | grep -c "error TS" || echo "0"</verify>
  <done>Complete TypeScript strict mode compliance achieved with zero compilation errors</done>
</task>

</tasks>

<verification>
- npx tsc --noEmit --strict produces zero errors across entire codebase
- grep for explicit any types returns zero matches in source files
- All D3 utilities compile successfully under strict mode
- No functional regression in data processing, synchronization, or visualization
- Phase 10 Foundation Cleanup TypeScript goal fully completed
</verification>

<success_criteria>
- TypeScript strict mode errors: 415 → 0 (100% elimination)
- Explicit any types: 18 → 0 (100% elimination)
- D3 utilities: Full strict mode compliance
- Type definitions: Complete interface-based architecture
- Phase 10 Foundation Cleanup: Complete TypeScript strict mode mastery achieved
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-cleanup/10-23-SUMMARY.md`
</output>