---
phase: 10-foundation-cleanup
plan: 16
type: execute
wave: 1
depends_on: []
files_modified:
  - src/utils/d3Performance.ts
  - src/utils/bridge-performance.ts
  - src/components/views/PerformanceMonitor.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Performance monitoring code uses proper TypeScript interfaces instead of any types"
    - "D3 performance measurement functions are type-safe"
    - "Bridge testing utilities have complete type definitions"
  artifacts:
    - path: "src/utils/d3Performance.ts"
      provides: "Type-safe D3 performance measurement interfaces"
      contains: "interface D3PerformanceMetrics"
    - path: "src/utils/bridge-performance.ts"
      provides: "Type-safe bridge testing methods"
      contains: "interface BridgeTestResult"
    - path: "src/components/views/PerformanceMonitor.tsx"
      provides: "Type-safe performance visualization"
      contains: "D3PerformanceMetrics"
  key_links:
    - from: "src/components/views/PerformanceMonitor.tsx"
      to: "src/utils/d3Performance.ts"
      via: "typed performance metrics import"
      pattern: "import.*D3PerformanceMetrics"
---

<objective>
Eliminate all explicit 'any' types from performance monitoring and testing utilities

Purpose: Restore type safety to critical performance measurement infrastructure that regressed during recent development
Output: 16 explicit any warnings eliminated across performance monitoring code
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-foundation-cleanup/10-RESEARCH.md
@.planning/phases/10-foundation-cleanup/10-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Create TypeScript interfaces for D3 performance measurement</name>
  <files>src/utils/d3Performance.ts</files>
  <action>
    Replace all 9 explicit 'any' types in src/utils/d3Performance.ts with proper TypeScript interfaces:

    1. Create D3PerformanceMetrics interface for measurement results
    2. Create D3SelectionTiming interface for selection performance data
    3. Create D3RenderMetrics interface for rendering measurement
    4. Update all function signatures to use these interfaces instead of any
    5. Add proper type guards where runtime type checking is needed
    6. Use 'unknown' type with type assertions for truly dynamic data

    Gap reason: "9 explicit any warnings in performance measurement code"
    Reference existing pattern: Use interface definitions like those in recent summaries (GlobalErrorReporting, DocumentTransform)
  </action>
  <verify>npm run lint src/utils/d3Performance.ts 2>&1 | grep "no-explicit-any" | wc -l</verify>
  <done>Zero 'no-explicit-any' warnings in d3Performance.ts (was 9)</done>
</task>

<task type="auto">
  <name>Add type safety to bridge performance testing utilities</name>
  <files>src/utils/bridge-performance.ts</files>
  <action>
    Eliminate 2 explicit any warnings in src/utils/bridge-performance.ts:

    1. Create BridgeTestResult interface for test result data
    2. Create BridgePerformanceConfig interface for test configuration
    3. Replace any types in test method signatures with proper interfaces
    4. Add type assertions for WebView bridge communication (inherently untyped)
    5. Use proper error typing for exception handling

    Gap reason: "2 explicit any warnings in bridge testing code"
    Pattern: Follow DocumentTransform interface pattern from Plan 10-14 for structured data processing
  </action>
  <verify>npm run lint src/utils/bridge-performance.ts 2>&1 | grep "no-explicit-any" | wc -l</verify>
  <done>Zero 'no-explicit-any' warnings in bridge-performance.ts (was 2)</done>
</task>

<task type="auto">
  <name>Type-safe performance monitor D3 visualization component</name>
  <files>src/components/views/PerformanceMonitor.tsx</files>
  <action>
    Eliminate 5 explicit any warnings in PerformanceMonitor.tsx:

    1. Import and use D3PerformanceMetrics interface from d3Performance.ts
    2. Replace any types in D3 selection and data binding with proper D3 types
    3. Create typed props interface for PerformanceMonitor component
    4. Add proper typing for D3 visualization data transformations
    5. Use D3's built-in types (d3.Selection, d3.ScaleLinear) instead of any

    Gap reason: "5 explicit any warnings in D3 visualization code"
    Pattern: Follow D3 TypeScript integration patterns established in recent Phase 10 work
  </action>
  <verify>npm run lint src/components/views/PerformanceMonitor.tsx 2>&1 | grep "no-explicit-any" | wc -l</verify>
  <done>Zero 'no-explicit-any' warnings in PerformanceMonitor.tsx (was 5)</done>
</task>

</tasks>

<verification>
Run comprehensive ESLint check to verify explicit any elimination:
- npm run lint 2>&1 | grep "no-explicit-any" | wc -l (should decrease by 16)
- Verify total warning count decreases from 43 towards target of 0
</verification>

<success_criteria>
- All 16 explicit any warnings eliminated from performance monitoring code
- TypeScript interfaces properly defined for D3 performance measurement
- Bridge testing utilities fully type-safe
- Performance monitor component uses proper D3 TypeScript types
- Zero 'no-explicit-any' warnings in modified files
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-cleanup/10-16-SUMMARY.md`
</output>