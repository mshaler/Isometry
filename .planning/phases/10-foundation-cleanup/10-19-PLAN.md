---
phase: 10-foundation-cleanup
plan: 19
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/D3Canvas.tsx
  - src/components/AxisNavigator.tsx
  - src/__tests__/utils.test.ts
  - src/__tests__/hooks.test.ts
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "TypeScript strict mode compilation succeeds without errors"
    - "Core UI components have proper type safety"
    - "Test files compile under strict TypeScript mode"
  artifacts:
    - path: "src/components/D3Canvas.tsx"
      provides: "Strict-mode compliant D3Canvas component"
      contains: "proper performance property typing"
    - path: "src/components/AxisNavigator.tsx"
      provides: "Type-safe axis navigation component"
      contains: "properly defined planeId and facet types"
    - path: "src/__tests__/"
      provides: "Strict-mode compliant test files"
      contains: "proper type assertions and imports"
  key_links:
    - from: "src/components/D3Canvas.tsx"
      to: "performance properties"
      via: "typed property access"
      pattern: "performance\\."
---

<objective>
Eliminate critical TypeScript strict mode errors blocking compilation

Purpose: Address the most severe TypeScript errors (484 total) starting with core UI components and test infrastructure
Output: Significant reduction in TypeScript strict mode errors targeting compilation success
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-foundation-cleanup/10-RESEARCH.md
@.planning/phases/10-foundation-cleanup/10-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Fix TypeScript strict mode errors in D3Canvas</name>
  <files>src/components/D3Canvas.tsx</files>
  <action>
    Resolve TypeScript strict mode errors in D3Canvas.tsx:

    1. Fix performance property type mismatches (undefined access errors)
    2. Add proper null checks for performance object access
    3. Define proper interfaces for canvas performance properties
    4. Add type assertions for DOM element access
    5. Fix any implicit any types in event handlers
    6. Ensure all props have proper TypeScript definitions

    Gap reason: "Performance property type mismatches and undefined access"
    Pattern: Use optional chaining (performance?.metric) and proper null checks for safe property access
  </action>
  <verify>npx tsc --noEmit --strict src/components/D3Canvas.tsx</verify>
  <done>D3Canvas.tsx compiles without errors under strict mode</done>
</task>

<task type="auto">
  <name>Fix AxisNavigator undefined variable references</name>
  <files>src/components/AxisNavigator.tsx</files>
  <action>
    Resolve undefined variable references in AxisNavigator.tsx:

    1. Define proper types for planeId and newFacet variables
    2. Add proper imports for any missing type definitions
    3. Fix undefined variable references (planeId, newFacet)
    4. Ensure all state variables are properly typed
    5. Add proper error handling for undefined state
    6. Fix any implicit any types in component logic

    Gap reason: "Undefined variable references (planeId, newFacet)"
    Pattern: Follow established PAFV navigation patterns from project architecture
  </action>
  <verify>npx tsc --noEmit --strict src/components/AxisNavigator.tsx</verify>
  <done>AxisNavigator.tsx compiles without errors under strict mode</done>
</task>

<task type="auto">
  <name>Fix test file TypeScript strict mode compliance</name>
  <files>
    src/__tests__/utils.test.ts
    src/__tests__/hooks.test.ts
  </files>
  <action>
    Resolve TypeScript strict mode errors in test files:

    1. Fix test file type mismatches and unknown property references
    2. Add proper type assertions for test data
    3. Import missing testing type definitions
    4. Fix any implicit any types in test mocks
    5. Add proper typing for test helper functions
    6. Ensure all test assertions have proper type safety

    Gap reason: "Test file type mismatches and unknown property references"
    Pattern: Use proper Jest/testing type definitions and explicit type assertions for test data
  </action>
  <verify>npx tsc --noEmit --strict src/__tests__/utils.test.ts src/__tests__/hooks.test.ts</verify>
  <done>Test files compile without errors under strict mode</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>TypeScript strict mode error fixes for core UI components and tests</what-built>
  <how-to-verify>
    1. Run: npx tsc --noEmit --strict
    2. Verify compilation succeeds or shows significantly fewer errors
    3. Test D3Canvas component functionality in browser at http://localhost:5173
    4. Test AxisNavigator plane/facet switching functionality
    5. Run tests: npm test
  </how-to-verify>
  <resume-signal>Type "approved" if compilation and functionality work, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Comprehensive TypeScript strict mode verification:
- npx tsc --noEmit --strict (should show major error reduction)
- npm run build (should succeed despite any remaining warnings)
- npm test (should pass with proper test type safety)
</verification>

<success_criteria>
- TypeScript strict mode error count significantly reduced (target: under 100 errors)
- Core UI components (D3Canvas, AxisNavigator) compile under strict mode
- Test infrastructure fully compliant with TypeScript strict mode
- Build pipeline continues to function with improved type safety
- Component functionality verified through human testing
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-cleanup/10-19-SUMMARY.md`
</output>