---
phase: 10-foundation-cleanup
plan: 13
type: execute
wave: 1
depends_on: []
files_modified: [
  "src/components/demo/CbCanvasDemo.tsx",
  "src/components/demo/D3ViewWrapperDemo.tsx",
  "src/components/demo/LATCHScalesDemo.tsx"
]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "D3 demo components render without any TypeScript 'as any' warnings"
    - "ESLint passes with zero warnings for demo components"
    - "D3 canvas and scale demos display correctly"
  artifacts:
    - path: "src/components/demo/CbCanvasDemo.tsx"
      provides: "Type-safe D3 canvas card component integration"
      contains: "proper D3Selection types"
    - path: "src/components/demo/D3ViewWrapperDemo.tsx"
      provides: "Type-safe D3 view wrapper implementation"
      contains: "CardRenderer interface"
    - path: "src/components/demo/LATCHScalesDemo.tsx"
      provides: "Type-safe D3 scale generation"
      contains: "D3ScaleCreator interface"
  key_links:
    - from: "src/components/demo/CbCanvasDemo.tsx"
      to: "D3 card renderer"
      via: "cardGroup.call(card)"
      pattern: "call\\(card\\s+as\\s+CardRenderer\\)"
    - from: "src/components/demo/LATCHScalesDemo.tsx"
      to: "D3 scale functions"
      via: "scale calls with proper types"
      pattern: "call\\(.*ScaleCreator\\)"
---

<objective>
Fix 4 'as any' TypeScript warnings in D3 demo components by implementing proper TypeScript interfaces for D3/React integration.

Purpose: Achieve the final ESLint warnings elimination needed for Phase 10's "absolute zero lint problems" goal
Output: Type-safe D3 demo components with zero ESLint warnings
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/10-foundation-cleanup/10-VERIFICATION.md

# Gap closure context - fixing specific ESLint warnings
@src/components/demo/CbCanvasDemo.tsx
@src/components/demo/D3ViewWrapperDemo.tsx
@src/components/demo/LATCHScalesDemo.tsx
</context>

<tasks>

<task type="auto">
  <name>Fix CbCanvasDemo D3 type safety</name>
  <files>src/components/demo/CbCanvasDemo.tsx</files>
  <action>
    Replace 'as any' type assertion with proper D3 type interface for card component integration:

    1. Define CardRenderer interface for D3 card component calls:
    ```typescript
    interface CardRenderer {
      (selection: d3.Selection<SVGGElement, CardData, null, undefined>): void;
    }
    ```

    2. Replace line 63 'cardGroup.call(card as any)' with proper type:
    ```typescript
    cardGroup.call(card as CardRenderer);
    ```

    3. Ensure CardData interface includes all necessary properties for the card component

    Gap reason: ESLint warning "Unexpected any. Specify a different type @typescript-eslint/no-explicit-any" at line 63
  </action>
  <verify>npm run lint | grep -c "CbCanvasDemo.tsx" should return 0</verify>
  <done>CbCanvasDemo.tsx produces zero ESLint warnings and displays D3 canvas correctly</done>
</task>

<task type="auto">
  <name>Fix D3ViewWrapperDemo type safety</name>
  <files>src/components/demo/D3ViewWrapperDemo.tsx</files>
  <action>
    Replace 'as any' type assertion with proper D3 view wrapper interface:

    1. Define ViewRenderer interface for D3 view wrapper calls:
    ```typescript
    interface ViewRenderer {
      (selection: d3.Selection<SVGGElement, ViewData, null, undefined>): void;
    }
    ```

    2. Replace line 51 view call 'as any' with proper type casting:
    ```typescript
    viewGroup.call(viewRenderer as ViewRenderer);
    ```

    3. Ensure ViewData interface matches expected D3 data structure

    Gap reason: ESLint warning "Unexpected any. Specify a different type @typescript-eslint/no-explicit-any" at line 51
  </action>
  <verify>npm run lint | grep -c "D3ViewWrapperDemo.tsx" should return 0</verify>
  <done>D3ViewWrapperDemo.tsx produces zero ESLint warnings and view wrapper displays correctly</done>
</task>

<task type="auto">
  <name>Fix LATCHScalesDemo D3 scale type safety</name>
  <files>src/components/demo/LATCHScalesDemo.tsx</files>
  <action>
    Replace both 'as any' type assertions with proper D3 scale interfaces:

    1. Define D3ScaleCreator interface for scale generation:
    ```typescript
    interface D3ScaleCreator {
      (selection: d3.Selection<SVGGElement, ScaleData, null, undefined>): void;
    }
    ```

    2. Replace line 51 scale call 'as any' with proper type:
    ```typescript
    scaleGroup.call(scaleCreator as D3ScaleCreator);
    ```

    3. Replace line 63 axis call 'as any' with proper type:
    ```typescript
    axisGroup.call(axisCreator as D3ScaleCreator);
    ```

    4. Ensure ScaleData interface includes domain, range, and axis properties

    Gap reason: 2 ESLint warnings "Unexpected any. Specify a different type @typescript-eslint/no-explicit-any" at lines 51 and 63
  </action>
  <verify>npm run lint | grep -c "LATCHScalesDemo.tsx" should return 0</verify>
  <done>LATCHScalesDemo.tsx produces zero ESLint warnings and D3 scales display correctly</done>
</task>

</tasks>

<verification>
- Run `npm run lint` and confirm zero warnings from demo components
- Test D3 demo pages render correctly without console errors
- Verify canvas interactions and scale displays function properly
</verification>

<success_criteria>
- All 4 'as any' warnings eliminated from D3 demo components
- ESLint warning count reduced from 5 to 1 (only document processor remaining)
- D3 demos maintain full visual and interactive functionality
- Progress toward Phase 10 "absolute zero lint problems" goal achieved
</success_criteria>

<output>
After completion, create `.planning/phases/10-foundation-cleanup/10-13-SUMMARY.md`
</output>