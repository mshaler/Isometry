---
phase: 27-application-integration-gap-closure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: ["src/MVPDemo.tsx"]
autonomous: true

must_haves:
  truths:
    - "LiveDataProvider is properly installed in main application provider tree"
    - "useLiveQuery hooks execute without provider context errors"
    - "Provider initialization completes successfully on app startup"
  artifacts:
    - path: "src/MVPDemo.tsx"
      provides: "LiveDataProvider integration in main app"
      contains: "LiveDataProvider"
  key_links:
    - from: "src/MVPDemo.tsx"
      to: "LiveDataProvider"
      via: "Provider tree wrapping"
      pattern: "<LiveDataProvider>"
---

<objective>
Install LiveDataProvider in main application provider tree to enable live database functionality throughout the app.

Purpose: Close the critical gap where sophisticated live database infrastructure exists but is inaccessible because LiveDataProvider is not installed in the main application's provider hierarchy. This enables all components to use useLiveQuery hooks without "must be used within LiveDataProvider" errors.
Output: LiveDataProvider properly integrated in main app provider tree with connection monitoring enabled.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 27 research findings
@.planning/phases/27-application-integration-gap-closure/27-RESEARCH.md

# Current main app file to modify
@src/MVPDemo.tsx

# LiveDataProvider implementation reference
@src/context/LiveDataContext.tsx
</context>

<tasks>

<task type="auto">
  <name>Install LiveDataProvider in main application provider tree</name>
  <files>src/MVPDemo.tsx</files>
  <action>
    Install LiveDataProvider in the main application's provider hierarchy by modifying MVPDemo.tsx.

    1. Add import for LiveDataProvider from '../context/LiveDataContext'

    2. In the unified app section (lines 113-134), add LiveDataProvider wrapper:
       - Place LiveDataProvider after CacheInvalidationProvider and BrowserRouter
       - Place it before ThemeProvider in the provider hierarchy
       - Use research-recommended configuration:
         ```jsx
         <LiveDataProvider
           enableGlobalSync={true}
           syncIntervalMs={30000}
           enableConnectionMonitoring={true}
         >
         ```

    3. Ensure the provider tree follows the research-recommended pattern:
       ```jsx
       <QueryClientProvider> // Already exists as CacheInvalidationProvider
         <LiveDataProvider>  // ‚Üê Add this level
           <ThemeProvider>
             <EnvironmentProvider>
               <DatabaseProvider>
                 <AppStateProvider>
                   <FilterProvider>
                     <PAFVProvider>
                       <NotebookProvider>
       ```

    4. Verify the provider is added in BOTH app paths:
       - Unified app section (showUnified=true)
       - MVP demo section (showUnified=false)

    Do NOT modify any other provider ordering or existing functionality. Only add LiveDataProvider at the correct level in the hierarchy.
  </action>
  <verify>
    ```bash
    # Verify LiveDataProvider import was added
    grep -n "LiveDataProvider" src/MVPDemo.tsx

    # Verify provider is installed in correct location
    grep -A 5 -B 5 "LiveDataProvider" src/MVPDemo.tsx

    # Check TypeScript compilation
    npm run build 2>&1 | head -20
    ```
  </verify>
  <done>LiveDataProvider is imported and properly wrapped around the application in both unified and demo modes, with enableGlobalSync, syncIntervalMs, and enableConnectionMonitoring configuration options set according to research recommendations</done>
</task>

</tasks>

<verification>
1. LiveDataProvider import exists in MVPDemo.tsx
2. LiveDataProvider wraps the application in the correct position in provider hierarchy
3. Configuration options are set (enableGlobalSync, syncIntervalMs, enableConnectionMonitoring)
4. TypeScript compilation succeeds without errors
5. Both unified app and MVP demo paths include LiveDataProvider
</verification>

<success_criteria>
- LiveDataProvider is successfully installed in main application provider tree
- No "must be used within LiveDataProvider" errors when components use useLiveQuery hooks
- App startup initializes LiveDataProvider connection monitoring
- TypeScript compilation passes without provider-related errors
</success_criteria>

<output>
After completion, create `.planning/phases/27-application-integration-gap-closure/27-01-SUMMARY.md`
</output>