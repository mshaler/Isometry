---
phase: 24-typescript-error-resolution
plan: 03
type: execute
wave: 1
depends_on: []
files_modified: [
  "src/components/views/NetworkView.tsx",
  "src/components/views/EnhancedGridView.tsx",
  "src/components/views/EnhancedListView.tsx",
  "src/components/views/EnhancedViewSwitcher.tsx",
  "src/components/views/PAFVViewSwitcher.tsx"
]
autonomous: true

must_haves:
  truths:
    - "NetworkView.tsx defines proper D3 force simulation variables"
    - "Enhanced view components properly type unknown data as Node objects"
    - "View switcher components have clean React imports"
    - "All view components compile without variable scope errors"
  artifacts:
    - path: "src/components/views/NetworkView.tsx"
      provides: "D3 force simulation with proper variable declarations"
      min_lines: 150
    - path: "src/components/views/EnhancedGridView.tsx"
      provides: "Type-safe grid view with proper Node typing"
      contains: "Node"
    - path: "src/components/views/EnhancedListView.tsx"
      provides: "Type-safe list view with proper Node typing"
      contains: "Node"
  key_links:
    - from: "Enhanced view components"
      to: "src/types/database.ts"
      via: "Node type import"
      pattern: "import.*Node.*from.*database"
---

<objective>
Fix TypeScript errors in view components by resolving variable scope issues, typing unknown data properly, and cleaning unused imports.

Purpose: Ensure all view components in the visualization system compile correctly and handle data with proper type safety.

Output: Clean compilation for all view components with proper D3 variable scoping and Node type usage.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Node type patterns from existing codebase
@.planning/phases/10-foundation-cleanup/10-23-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Fix NetworkView D3 Variable Scope Issues</name>
  <files>src/components/views/NetworkView.tsx</files>
  <action>
    Fix the "Cannot find name 'd'" errors in NetworkView.tsx by properly declaring D3 force simulation variables:

    1. Lines 153-154, 157-158, 162-163: Declare 'd' variable properly for D3 force simulation
       - Add proper variable declaration: `const d = node` or similar based on context
       - Ensure D3 force simulation callback functions have proper parameter typing

    2. Lines 188-189: Fix 'd' variable access in positioning calculations
       - Ensure consistent variable naming and scoping throughout force simulation

    3. Review the entire D3 force simulation setup to ensure:
       - Node data is properly typed as Node objects
       - Force simulation callbacks have proper parameter declarations
       - Position calculations use consistently scoped variables

    Apply the D3 typing patterns established in Phase 10 for force simulations.
  </action>
  <verify>NetworkView.tsx compiles without variable scope or D3 force simulation errors</verify>
  <done>NetworkView force simulation uses proper variable declarations and D3 typing</done>
</task>

<task type="auto">
  <name>Fix Enhanced View Component Type Issues</name>
  <files>src/components/views/EnhancedGridView.tsx, src/components/views/EnhancedListView.tsx</files>
  <action>
    Fix the "unknown is not assignable to Node" errors in enhanced view components:

    1. EnhancedGridView.tsx line 40: Fix unknown to Node assignment
       - Add type assertion: `item as Node` or proper type guard
       - Ensure proper Node type import from database types

    2. EnhancedListView.tsx line 38: Fix unknown to Node assignment
       - Apply same type assertion/guard pattern
       - Ensure consistent Node typing throughout component

    3. Add proper imports for Node type if missing:
       ```typescript
       import type { Node } from '../types/database';
       ```

    Use the established pattern from Phase 10 where unknown data from queries is safely typed through proper interfaces.
  </action>
  <verify>Enhanced view components compile without unknown type assignment errors</verify>
  <done>Enhanced view components properly type all data as Node objects</done>
</task>

<task type="auto">
  <name>Clean View Switcher Component Imports</name>
  <files>src/components/views/EnhancedViewSwitcher.tsx, src/components/views/PAFVViewSwitcher.tsx</files>
  <action>
    Remove unused React imports from view switcher components:

    1. EnhancedViewSwitcher.tsx line 1: Remove unused React import
       - Check if React is actually used in the component
       - Remove import if only using JSX (which doesn't require React import in newer versions)

    2. PAFVViewSwitcher.tsx line 1: Remove unused React import if not needed
       - Apply same pattern - keep only if React APIs are actually used

    3. Ensure any actual React usage is preserved:
       - React hooks (useState, useEffect, etc.)
       - React types (React.Component, React.FC, etc.)
       - Direct React API calls

    Follow the import cleanup pattern established in Phase 10.
  </action>
  <verify>View switcher components compile without unused import warnings</verify>
  <done>View switcher components have clean imports with no unused React references</done>
</task>

</tasks>

<verification>
- Run `npx tsc --noEmit` on all view components and confirm error reduction
- Test NetworkView renders D3 force simulation correctly
- Verify Enhanced view components display Node data properly
- Check that view switchers function without console warnings
</verification>

<success_criteria>
1. NetworkView.tsx has proper D3 force simulation variable declarations
2. Enhanced view components type unknown data as Node objects correctly
3. View switcher components have clean imports without unused React references
4. All view components compile without TypeScript errors
5. Visualization system maintains full functionality with proper typing
</success_criteria>

<output>
After completion, create `.planning/phases/24-typescript-error-resolution/24-03-SUMMARY.md`
</output>