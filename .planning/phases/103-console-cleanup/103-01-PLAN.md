---
phase: 103-console-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/hooks/ui/useTipTapEditor.ts
  - index.html
autonomous: true

must_haves:
  truths:
    - "TipTap editor initializes without 'Duplicate extension names' warning"
    - "Favicon loads successfully (no 404 error in console)"
    - "Browser console shows no errors on initial page load"
  artifacts:
    - path: "src/hooks/ui/useTipTapEditor.ts"
      provides: "TipTap editor configuration"
      contains: "StarterKit.configure"
    - path: "index.html"
      provides: "HTML entry point with favicon"
      contains: "link rel=\"icon\""
  key_links:
    - from: "index.html"
      to: "/favicon.svg"
      via: "link rel=\"icon\" tag"
      pattern: "href=\"/favicon.svg\""
---

<objective>
Fix console errors that appear on initial page load: TipTap duplicate extension warning and missing favicon 404.

Purpose: Clean developer experience without distracting error messages on every page load.
Output: Error-free browser console on startup.
</objective>

<execution_context>
@/Users/mshaler/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mshaler/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/103-console-cleanup/103-RESEARCH.md

# Key source files
@src/hooks/ui/useTipTapEditor.ts
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix TipTap Link Extension Duplicate Warning</name>
  <files>src/hooks/ui/useTipTapEditor.ts</files>
  <action>
Remove the separate Link import and configuration. TipTap v3.19+ includes Link in StarterKit.

1. Remove line 4: `import Link from '@tiptap/extension-link';`

2. In the extensions array (around line 145-153), remove the standalone Link.configure() call:
   ```typescript
   // REMOVE this block
   Link.configure({
     openOnClick: false,
     autolink: true,
   }),
   ```

3. Instead, configure Link via StarterKit (note: StarterKit.configure does NOT support link configuration directly in v3 - the link extension is bundled but NOT configurable via StarterKit. Research indicates we should keep the separate Link import but ensure we're not importing duplicate).

UPDATE: Actually, TipTap v3 StarterKit DOES include Link but it's NOT configurable through StarterKit.configure(). The warning happens because StarterKit includes a default Link AND we're adding another.

The fix is to DISABLE the built-in Link in StarterKit and keep our configured one:

```typescript
StarterKit.configure({
  // Disable built-in Link to prevent duplicate
  link: false,
  // ... rest of StarterKit config
}),
Link.configure({
  openOnClick: false,
  autolink: true,
}),
```

This keeps our custom Link configuration while preventing the duplicate warning.
  </action>
  <verify>
Run `npm run dev`, open browser DevTools console.
Verify: No "Duplicate extension names found: ['link']" warning on page load.
Create/edit a card with text and confirm link autodetection still works.
  </verify>
  <done>
TipTap editor initializes without duplicate extension warning.
Link functionality (autolink URLs, openOnClick: false) preserved.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Favicon Link Tag</name>
  <files>index.html</files>
  <action>
Add the favicon link tag to the HTML head. The favicon.svg already exists at public/favicon.svg.

Update index.html to include the favicon reference:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Isometry</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

The key addition is the `<link rel="icon" type="image/svg+xml" href="/favicon.svg" />` line.

Use absolute path `/favicon.svg` to ensure it works with React Router.
  </action>
  <verify>
Run `npm run dev`, open browser.
Verify: No "GET /favicon.ico 404 (Not Found)" error in console.
Verify: Favicon appears in browser tab.
  </verify>
  <done>
Favicon loads successfully without 404 error.
Browser tab shows the SVG favicon.
  </done>
</task>

</tasks>

<verification>
1. Run `npm run dev` and open http://localhost:5173
2. Open browser DevTools -> Console tab
3. Refresh the page
4. Verify: Zero errors on initial page load
5. Verify: No "Duplicate extension names" warning
6. Verify: No "favicon.ico 404" error
7. Verify: Favicon visible in browser tab
</verification>

<success_criteria>
- [ ] TipTap editor starts without duplicate extension warning
- [ ] Favicon.svg loads and displays in browser tab
- [ ] Browser console shows no errors on fresh page load
- [ ] Link autodetection in editor still works
</success_criteria>

<output>
After completion, create `.planning/phases/103-console-cleanup/103-01-SUMMARY.md`
</output>
