# v5.2 Technical Debt

**Goal:** Reduce technical debt by eliminating unused code, improving test reliability, and ensuring codebase health.

**Source:** Knip analysis showing 209 unused files after initial cleanup (287 → 209).

## Requirements

### Phase 83: Knip Deep Cleanup (Low)

**KNIP-01: Analyze Dependency Chains**
- Map remaining 209 unused files by dependency chain
- Identify safe-to-delete clusters vs. complex chains
- Document files requiring manual review

**KNIP-02: Component Cleanup**
- Remove orphaned components in `src/components/ui/` (19 files)
- Remove orphaned components in `src/components/supergrid/` (5 files)
- Update any index.ts barrel exports

**KNIP-03: Hook Cleanup**
- Remove unused hooks in `src/hooks/database/` (5 files)
- Remove unused hooks in `src/hooks/data/` (5 files)
- Remove unused hooks in `src/hooks/ui/` (4 files)

**KNIP-04: Utils Cleanup**
- Remove `src/utils/d3-visualization/` (10 files)
- Remove `src/utils/database/` (9 files)
- Remove `src/utils/performance/` (4 files)
- Remove `src/utils/webview/` (3 files)

### Phase 84: Test Reliability (Medium)

**TEST-01: Fix Pre-existing Failures**
- Diagnose 13 failing test files
- Fix or remove obsolete tests
- Target: 0 failing test files

**TEST-02: Remove Dead Test Code**
- Remove tests for deleted components
- Clean up test utilities no longer needed
- Update test setup files

### Phase 85: Services Health (Low)

**SVC-01: Remove Unused Services**
- Remove `src/services/analytics/ConnectionSuggestionService.ts`
- Remove `src/services/analytics/GraphAnalyticsAdapter.ts`
- Remove `src/services/data-sync/CloudKitSyncAdapter.ts`
- Remove `src/services/query/QueryCacheService.ts`
- Remove `src/services/system/TauriService.ts`

**SVC-02: Directory Reorganization**
- Audit src/services structure (29 files currently)
- Consider consolidation or extraction

## Success Criteria

1. Knip unused file count < 100
2. All tests pass (0 failing files)
3. TypeScript compiles with no errors
4. ESLint errors = 0, warnings ≤ 650 (ratchet down from 700)

## Current Status

| Metric | Before | After Initial | Target |
|--------|--------|---------------|--------|
| Unused files | 287 | 209 | <100 |
| Test failures | 16 files | 13 files | 0 |
| Lines deleted | - | 16,869 | 25,000+ |

## Dependencies

- Can run in parallel with v5.1 Notebook Integration
- No external dependencies

## Phases

| Phase | Name | Plans | Complexity |
|-------|------|-------|------------|
| 83 | Knip Deep Cleanup | 4 | Low |
| 84 | Test Reliability | 2 | Medium |
| 85 | Services Health | 2 | Low |

---
*Created: 2026-02-13*
*Initial cleanup: 78 files deleted, 16,869 lines removed*
